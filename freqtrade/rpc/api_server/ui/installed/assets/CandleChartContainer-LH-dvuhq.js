import{Z as Ne,ar as $t,af as pt,N as M,c as _,a as v,d as re,r as V,o as Ge,U as j,e as O,b as y,z as K,a5 as Oe,f as a,i as X,g as Se,h as L,_ as ft,H as Mt,as as Lt,$ as ht,at as Pt,au as Vt,av as Tt,aw as We,ax as At,ay as Dt,az as Et,aA as Ae,M as oe,k as A,Y as mt,j as D,aB as ee,aC as Ht,l as G,s as bt,aD as Bt,aE as Ft,aF as Rt,aG as zt,aH as Kt,aI as Ut,ae as jt,aJ as we,aK as Je,ai as Nt,ab as Qe,aL as _e,aM as Gt,aN as et,ao as De,aO as Zt,aP as ue,an as qt,a1 as ie,n as tt,aQ as Xt,aR as Yt,F as Ce,m as gt,V as vt,x as Y,aS as Wt,aT as ze,aU as Jt,a4 as Qt,aV as $e,aW as en,u as yt,v as tn,C as nt,t as Ze,aX as nn,aY as on,G as xt,E as Ke,aZ as it,K as ln,a_ as sn,a$ as de,y as an,W as rn,b0 as un,X as dn,b1 as cn}from"./index-CYaPUaP7.js";import{s as pn}from"./index-DsUEvk8J.js";import{s as fn,a as hn,_ as Ot,b as mn}from"./index-6gy8GQ0e.js";import{_ as bn}from"./check-aIBAq1y-.js";import{u as gn,E as vn,e as yn,a as xn,b as On,c as Sn,d as In,i as kn}from"./installCanvasRenderer-C6uSIFNs.js";import{a as wn,c as _n,b as Cn,h as $n,j as Mn,f as Ln,k as Pn,l as Vn,m as Tn,n as An,i as Dn,g as En,o as Hn,d as Bn}from"./chartZoom-DtDUebyo.js";var Fn=({dt:t})=>`
.p-textarea {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: ${t("textarea.color")};
    background: ${t("textarea.background")};
    padding-block: ${t("textarea.padding.y")};
    padding-inline: ${t("textarea.padding.x")};
    border: 1px solid ${t("textarea.border.color")};
    transition: background ${t("textarea.transition.duration")}, color ${t("textarea.transition.duration")}, border-color ${t("textarea.transition.duration")}, outline-color ${t("textarea.transition.duration")}, box-shadow ${t("textarea.transition.duration")};
    appearance: none;
    border-radius: ${t("textarea.border.radius")};
    outline-color: transparent;
    box-shadow: ${t("textarea.shadow")};
}

.p-textarea:enabled:hover {
    border-color: ${t("textarea.hover.border.color")};
}

.p-textarea:enabled:focus {
    border-color: ${t("textarea.focus.border.color")};
    box-shadow: ${t("textarea.focus.ring.shadow")};
    outline: ${t("textarea.focus.ring.width")} ${t("textarea.focus.ring.style")} ${t("textarea.focus.ring.color")};
    outline-offset: ${t("textarea.focus.ring.offset")};
}

.p-textarea.p-invalid {
    border-color: ${t("textarea.invalid.border.color")};
}

.p-textarea.p-variant-filled {
    background: ${t("textarea.filled.background")};
}

.p-textarea.p-variant-filled:enabled:hover {
    background: ${t("textarea.filled.hover.background")};
}

.p-textarea.p-variant-filled:enabled:focus {
    background: ${t("textarea.filled.focus.background")};
}

.p-textarea:disabled {
    opacity: 1;
    background: ${t("textarea.disabled.background")};
    color: ${t("textarea.disabled.color")};
}

.p-textarea::placeholder {
    color: ${t("textarea.placeholder.color")};
}

.p-textarea.p-invalid::placeholder {
    color: ${t("textarea.invalid.placeholder.color")};
}

.p-textarea-fluid {
    width: 100%;
}

.p-textarea-resizable {
    overflow: hidden;
    resize: none;
}

.p-textarea-sm {
    font-size: ${t("textarea.sm.font.size")};
    padding-block: ${t("textarea.sm.padding.y")};
    padding-inline: ${t("textarea.sm.padding.x")};
}

.p-textarea-lg {
    font-size: ${t("textarea.lg.font.size")};
    padding-block: ${t("textarea.lg.padding.y")};
    padding-inline: ${t("textarea.lg.padding.x")};
}
`,Rn={root:function(e){var n=e.instance,o=e.props;return["p-textarea p-component",{"p-filled":n.$filled,"p-textarea-resizable ":o.autoResize,"p-textarea-sm p-inputfield-sm":o.size==="small","p-textarea-lg p-inputfield-lg":o.size==="large","p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-textarea-fluid":n.$fluid}]}},zn=Ne.extend({name:"textarea",style:Fn,classes:Rn}),Kn={name:"BaseTextarea",extends:$t,props:{autoResize:Boolean},style:zn,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function ye(t){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(t)}function Un(t,e,n){return(e=jn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jn(t){var e=Nn(t,"string");return ye(e)=="symbol"?e:e+""}function Nn(t,e){if(ye(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ye(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var St={name:"Textarea",extends:Kn,inheritAttrs:!1,observer:null,mounted:function(){var e=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){e.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){this.$el.offsetParent&&(this.$el.style.height="auto",this.$el.style.height=this.$el.scrollHeight+"px",parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden")},onInput:function(e){this.autoResize&&this.resize(),this.writeValue(e.target.value,e)}},computed:{attrs:function(){return M(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return pt(Un({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},Gn=["value","name","disabled","aria-invalid","data-p"];function Zn(t,e,n,o,l,i){return v(),_("textarea",M({class:t.cx("root"),value:t.d_value,name:t.name,disabled:t.disabled,"aria-invalid":t.invalid||void 0,"data-p":i.dataP,onInput:e[0]||(e[0]=function(){return i.onInput&&i.onInput.apply(i,arguments)})},i.attrs),null,16,Gn)}St.render=Zn;const qn={class:"flex flex-row"},Xn={class:"flex flex-col grow"},Yn={for:"selAvailableIndicator",class:"form-label"},It=re({__name:"PlotIndicatorSelect",props:{modelValue:{required:!1,default:"",type:String},columns:{required:!0,type:Array},label:{required:!0,type:String}},emits:["update:modelValue","indicatorSelected"],setup(t,{emit:e}){const n=t,o=e,l=V("");function i(){o("indicatorSelected",l.value),o("update:modelValue",l.value)}function s(){l.value="",i()}return Ge(()=>{l.value=n.modelValue}),j(l,()=>{i()}),j(()=>n.modelValue,p=>{l.value=p}),(p,c)=>{const d=Oe,r=ft,S=Se;return v(),_("div",qn,[O("div",Xn,[O("label",Yn,K(t.label),1),y(d,{modelValue:a(l),"onUpdate:modelValue":c[0]||(c[0]=C=>X(l)?l.value=C:null),options:t.columns,size:"small",clearable:!1},null,8,["modelValue","options"])]),y(S,{size:"small",title:"Abort",class:"ms-1 mt-auto",severity:"secondary",onClick:s},{icon:L(()=>[y(r)]),_:1})])}}}),Wn={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Jn(t,e){return v(),_("svg",Wn,e[0]||(e[0]=[O("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22s1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22s-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22z"},null,-1)]))}const Qn=Mt({name:"mdi-dice-multiple",render:Jn});var ei=({dt:t})=>`
.p-colorpicker {
    display: inline-block;
    position: relative;
}

.p-colorpicker-dragging {
    cursor: pointer;
}

.p-colorpicker-preview {
    width: ${t("colorpicker.preview.width")};
    height: ${t("colorpicker.preview.height")};
    padding: 0;
    border: 0 none;
    border-radius: ${t("colorpicker.preview.border.radius")};
    transition: background ${t("colorpicker.transition.duration")}, color ${t("colorpicker.transition.duration")}, border-color ${t("colorpicker.transition.duration")}, outline-color ${t("colorpicker.transition.duration")}, box-shadow ${t("colorpicker.transition.duration")};
    outline-color: transparent;
    cursor: pointer;
}

.p-colorpicker-preview:enabled:focus-visible {
    border-color: ${t("colorpicker.preview.focus.border.color")};
    box-shadow: ${t("colorpicker.preview.focus.ring.shadow")};
    outline: ${t("colorpicker.preview.focus.ring.width")} ${t("colorpicker.preview.focus.ring.style")} ${t("colorpicker.preview.focus.ring.color")};
    outline-offset: ${t("colorpicker.preview.focus.ring.offset")};
}

.p-colorpicker-panel {
    background: ${t("colorpicker.panel.background")};
    border: 1px solid ${t("colorpicker.panel.border.color")};
    border-radius: ${t("colorpicker.panel.border.radius")};
    box-shadow: ${t("colorpicker.panel.shadow")};
    width: 193px;
    height: 166px;
    position: absolute;
    top: 0;
    left: 0;
}

.p-colorpicker-panel-inline {
    box-shadow: none;
    position: static;
}

.p-colorpicker-content {
    position: relative;
}

.p-colorpicker-color-selector {
    width: 150px;
    height: 150px;
    inset-block-start: 8px;
    inset-inline-start: 8px;
    position: absolute;
}

.p-colorpicker-color-background {
    width: 100%;
    height: 100%;
    background: linear-gradient(to top, #000 0%, rgba(0, 0, 0, 0) 100%), linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);
}

.p-colorpicker-color-handle {
    position: absolute;
    inset-block-start: 0px;
    inset-inline-start: 150px;
    border-radius: 100%;
    width: 10px;
    height: 10px;
    border-width: 1px;
    border-style: solid;
    margin: -5px 0 0 -5px;
    cursor: pointer;
    opacity: 0.85;
    border-color: ${t("colorpicker.handle.color")};
}

.p-colorpicker-hue {
    width: 17px;
    height: 150px;
    inset-block-start: 8px;
    inset-inline-start: 167px;
    position: absolute;
    opacity: 0.85;
    background: linear-gradient(0deg,
        red 0,
        #ff0 17%,
        #0f0 33%,
        #0ff 50%,
        #00f 67%,
        #f0f 83%,
        red);
}

.p-colorpicker-hue-handle {
    position: absolute;
    inset-block-start: 150px;
    inset-inline-start: 0px;
    width: 21px;
    margin-inline-start: -2px;
    margin-block-start: -5px;
    height: 10px;
    border-width: 2px;
    border-style: solid;
    opacity: 0.85;
    cursor: pointer;
    border-color: ${t("colorpicker.handle.color")};
}
`,ti={root:"p-colorpicker p-component",preview:function(e){var n=e.props;return["p-colorpicker-preview",{"p-disabled":n.disabled}]},panel:function(e){var n=e.instance,o=e.props;return["p-colorpicker-panel",{"p-colorpicker-panel-inline":o.inline,"p-disabled":o.disabled,"p-invalid":n.$invalid}]},colorSelector:"p-colorpicker-color-selector",colorBackground:"p-colorpicker-color-background",colorHandle:"p-colorpicker-color-handle",hue:"p-colorpicker-hue",hueHandle:"p-colorpicker-hue-handle"},ni=Ne.extend({name:"colorpicker",style:ei,classes:ti}),ii={name:"BaseColorPicker",extends:ht,props:{defaultColor:{type:null,default:"ff0000"},inline:{type:Boolean,default:!1},format:{type:String,default:"hex"},tabindex:{type:String,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},inputId:{type:String,default:null},panelClass:null,overlayClass:null},style:ni,provide:function(){return{$pcColorPicker:this,$parentInstance:this}}},kt={name:"ColorPicker",extends:ii,inheritAttrs:!1,emits:["change","show","hide"],data:function(){return{overlayVisible:!1}},hsbValue:null,localHue:null,outsideClickListener:null,documentMouseMoveListener:null,documentMouseUpListener:null,scrollHandler:null,resizeListener:null,hueDragging:null,colorDragging:null,selfUpdate:null,picker:null,colorSelector:null,colorHandle:null,hueView:null,hueHandle:null,watch:{modelValue:{immediate:!0,handler:function(e){this.hsbValue=this.toHSB(e),this.selfUpdate?this.selfUpdate=!1:this.updateUI()}}},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindDragListeners(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.picker&&this.autoZIndex&&Ae.clear(this.picker),this.clearRefs()},mounted:function(){this.updateUI()},methods:{pickColor:function(e){var n=this.colorSelector.getBoundingClientRect(),o=n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),l=n.left+document.body.scrollLeft,i=Math.floor(100*Math.max(0,Math.min(150,(e.pageX||e.changedTouches[0].pageX)-l))/150),s=Math.floor(100*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-o)))/150);this.hsbValue=this.validateHSB({h:this.localHue,s:i,b:s}),this.selfUpdate=!0,this.updateColorHandle(),this.updateInput(),this.updateModel(e)},pickHue:function(e){var n=this.hueView.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);this.localHue=Math.floor(360*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-n)))/150),this.hsbValue=this.validateHSB({h:this.localHue,s:100,b:100}),this.selfUpdate=!0,this.updateColorSelector(),this.updateHue(),this.updateModel(e),this.updateInput()},updateModel:function(e){var n=this.d_value;switch(this.format){case"hex":n=this.HSBtoHEX(this.hsbValue);break;case"rgb":n=this.HSBtoRGB(this.hsbValue);break;case"hsb":n=this.hsbValue;break}this.writeValue(n,e),this.$emit("change",{event:e,value:n})},updateColorSelector:function(){if(this.colorSelector){var e=this.validateHSB({h:this.hsbValue.h,s:100,b:100});this.colorSelector.style.backgroundColor="#"+this.HSBtoHEX(e)}},updateColorHandle:function(){this.colorHandle&&(this.colorHandle.style.left=Math.floor(150*this.hsbValue.s/100)+"px",this.colorHandle.style.top=Math.floor(150*(100-this.hsbValue.b)/100)+"px")},updateHue:function(){this.hueHandle&&(this.hueHandle.style.top=Math.floor(150-150*this.hsbValue.h/360)+"px")},updateInput:function(){this.$refs.input&&(this.$refs.input.style.backgroundColor="#"+this.HSBtoHEX(this.hsbValue))},updateUI:function(){this.updateHue(),this.updateColorHandle(),this.updateInput(),this.updateColorSelector()},validateHSB:function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},validateRGB:function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},validateHEX:function(e){var n=6-e.length;if(n>0){for(var o=[],l=0;l<n;l++)o.push("0");o.push(e),e=o.join("")}return e},HEXtoRGB:function(e){var n=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:n>>16,g:(n&65280)>>8,b:n&255}},HEXtoHSB:function(e){return this.RGBtoHSB(this.HEXtoRGB(e))},RGBtoHSB:function(e){var n={h:0,s:0,b:0},o=Math.min(e.r,e.g,e.b),l=Math.max(e.r,e.g,e.b),i=l-o;return n.b=l,n.s=l!==0?255*i/l:0,n.s!==0?e.r===l?n.h=(e.g-e.b)/i:e.g===l?n.h=2+(e.b-e.r)/i:n.h=4+(e.r-e.g)/i:n.h=-1,n.h*=60,n.h<0&&(n.h+=360),n.s*=100/255,n.b*=100/255,n},HSBtoRGB:function(e){var n={r:null,g:null,b:null},o=Math.round(e.h),l=Math.round(e.s*255/100),i=Math.round(e.b*255/100);if(l===0)n={r:i,g:i,b:i};else{var s=i,p=(255-l)*i/255,c=(s-p)*(o%60)/60;o===360&&(o=0),o<60?(n.r=s,n.b=p,n.g=p+c):o<120?(n.g=s,n.b=p,n.r=s-c):o<180?(n.g=s,n.r=p,n.b=p+c):o<240?(n.b=s,n.r=p,n.g=s-c):o<300?(n.b=s,n.g=p,n.r=p+c):o<360?(n.r=s,n.g=p,n.b=s-c):(n.r=0,n.g=0,n.b=0)}return{r:Math.round(n.r),g:Math.round(n.g),b:Math.round(n.b)}},RGBtoHEX:function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var o in n)n[o].length===1&&(n[o]="0"+n[o]);return n.join("")},HSBtoHEX:function(e){return this.RGBtoHEX(this.HSBtoRGB(e))},toHSB:function(e){var n;if(e)switch(this.format){case"hex":n=this.HEXtoHSB(e);break;case"rgb":n=this.RGBtoHSB(e);break;case"hsb":n=e;break}else n=this.HEXtoHSB(this.defaultColor);return this.localHue==null||!this.overlayVisible?this.localHue=n.h:n.h=this.localHue,n},onOverlayEnter:function(e){this.updateUI(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&Ae.set("overlay",e,this.baseZIndex,this.$primevue.config.zIndex.overlay),this.$emit("show")},onOverlayLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.clearRefs(),this.$emit("hide")},onOverlayAfterLeave:function(e){this.autoZIndex&&Ae.clear(e)},alignOverlay:function(){this.appendTo==="self"?Dt(this.picker,this.$refs.input):Et(this.picker,this.$refs.input)},onInputClick:function(){this.disabled||(this.overlayVisible=!this.overlayVisible)},onInputKeydown:function(e){switch(e.code){case"Space":this.overlayVisible=!this.overlayVisible,e.preventDefault();break;case"Escape":case"Tab":this.overlayVisible=!1;break}},onInputBlur:function(e){var n,o;(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o)},onColorMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onColorDragStart(e))},onColorDragStart:function(e){this.disabled||(this.colorDragging=!0,this.pickColor(e),this.$el.setAttribute("p-colorpicker-dragging","true"),!this.isUnstyled&&We(this.$el,"p-colorpicker-dragging"),e.preventDefault())},onDrag:function(e){this.colorDragging&&(this.pickColor(e),e.preventDefault()),this.hueDragging&&(this.pickHue(e),e.preventDefault())},onDragEnd:function(){this.colorDragging=!1,this.hueDragging=!1,this.$el.setAttribute("p-colorpicker-dragging","false"),!this.isUnstyled&&At(this.$el,"p-colorpicker-dragging"),this.unbindDragListeners()},onHueMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onHueDragStart(e))},onHueDragStart:function(e){this.disabled||(this.hueDragging=!0,this.pickHue(e),!this.isUnstyled&&We(this.$el,"p-colorpicker-dragging"))},isInputClicked:function(e){return this.$refs.input&&this.$refs.input.isSameNode(e.target)},bindDragListeners:function(){this.bindDocumentMouseMoveListener(),this.bindDocumentMouseUpListener()},unbindDragListeners:function(){this.unbindDocumentMouseMoveListener(),this.unbindDocumentMouseUpListener()},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.picker&&!e.picker.contains(n.target)&&!e.isInputClicked(n)&&(e.overlayVisible=!1)},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new Tt(this.$refs.container,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!Vt()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindDocumentMouseMoveListener:function(){this.documentMouseMoveListener||(this.documentMouseMoveListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.documentMouseMoveListener))},unbindDocumentMouseMoveListener:function(){this.documentMouseMoveListener&&(document.removeEventListener("mousemove",this.documentMouseMoveListener),this.documentMouseMoveListener=null)},bindDocumentMouseUpListener:function(){this.documentMouseUpListener||(this.documentMouseUpListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.documentMouseUpListener))},unbindDocumentMouseUpListener:function(){this.documentMouseUpListener&&(document.removeEventListener("mouseup",this.documentMouseUpListener),this.documentMouseUpListener=null)},pickerRef:function(e){this.picker=e},colorSelectorRef:function(e){this.colorSelector=e},colorHandleRef:function(e){this.colorHandle=e},hueViewRef:function(e){this.hueView=e},hueHandleRef:function(e){this.hueHandle=e},clearRefs:function(){this.picker=null,this.colorSelector=null,this.colorHandle=null,this.hueView=null,this.hueHandle=null},onOverlayClick:function(e){Pt.emit("overlay-click",{originalEvent:e,target:this.$el})}},components:{Portal:Lt}};function xe(t){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(t)}function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,o)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ot(Object(n),!0).forEach(function(o){oi(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function oi(t,e,n){return(e=li(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function li(t){var e=si(t,"string");return xe(e)=="symbol"?e:e+""}function si(t,e){if(xe(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(xe(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ai=["id","tabindex","disabled"];function ri(t,e,n,o,l,i){var s=oe("Portal");return v(),_("div",M({ref:"container",class:t.cx("root")},t.ptmi("root")),[t.inline?A("",!0):(v(),_("input",M({key:0,ref:"input",id:t.inputId,type:"text",class:t.cx("preview"),readonly:"",tabindex:t.tabindex,disabled:t.disabled,onClick:e[0]||(e[0]=function(){return i.onInputClick&&i.onInputClick.apply(i,arguments)}),onKeydown:e[1]||(e[1]=function(){return i.onInputKeydown&&i.onInputKeydown.apply(i,arguments)}),onBlur:e[2]||(e[2]=function(){return i.onInputBlur&&i.onInputBlur.apply(i,arguments)})},t.ptm("preview")),null,16,ai)),y(s,{appendTo:t.appendTo,disabled:t.inline},{default:L(function(){return[y(mt,M({name:"p-connected-overlay",onEnter:i.onOverlayEnter,onLeave:i.onOverlayLeave,onAfterLeave:i.onOverlayAfterLeave},t.ptm("transition")),{default:L(function(){return[t.inline||l.overlayVisible?(v(),_("div",M({key:0,ref:i.pickerRef,class:[t.cx("panel"),t.panelClass,t.overlayClass],onClick:e[11]||(e[11]=function(){return i.onOverlayClick&&i.onOverlayClick.apply(i,arguments)})},lt(lt({},t.ptm("panel")),t.ptm("overlay"))),[O("div",M({class:t.cx("content")},t.ptm("content")),[O("div",M({ref:i.colorSelectorRef,class:t.cx("colorSelector"),onMousedown:e[3]||(e[3]=function(p){return i.onColorMousedown(p)}),onTouchstart:e[4]||(e[4]=function(p){return i.onColorDragStart(p)}),onTouchmove:e[5]||(e[5]=function(p){return i.onDrag(p)}),onTouchend:e[6]||(e[6]=function(p){return i.onDragEnd()})},t.ptm("colorSelector")),[O("div",M({class:t.cx("colorBackground")},t.ptm("colorBackground")),[O("div",M({ref:i.colorHandleRef,class:t.cx("colorHandle")},t.ptm("colorHandle")),null,16)],16)],16),O("div",M({ref:i.hueViewRef,class:t.cx("hue"),onMousedown:e[7]||(e[7]=function(p){return i.onHueMousedown(p)}),onTouchstart:e[8]||(e[8]=function(p){return i.onHueDragStart(p)}),onTouchmove:e[9]||(e[9]=function(p){return i.onDrag(p)}),onTouchend:e[10]||(e[10]=function(p){return i.onDragEnd()})},t.ptm("hue")),[O("div",M({ref:i.hueHandleRef,class:t.cx("hueHandle")},t.ptm("hueHandle")),null,16)],16)],16)],16)):A("",!0)]}),_:1},16,["onEnter","onLeave","onAfterLeave"])]}),_:1},8,["appendTo","disabled"])],16)}kt.render=ri;function ve(){return`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`}const ui={class:"flex flex-col lg:flex-row justify-between mt-1"},di={class:"flex flex-col w-full"},ci={class:"flex flex-col w-full"},pi={key:1,class:"flex flex-col mt-2 gap-1 items-center"},fi=re({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,o=e,l=V(ve()),i=D({get:()=>l.value,set:w=>{!w.startsWith("#")&&(w.length===3||w.length===6)&&/^[0-9a-fA-F]+$/.test(w)&&(w=`#${w}`),l.value=w}}),s=V(ee.line),p=V(Object.keys(ee)),c=V(""),d=V(!1),r=V(""),S=V(3);function C(){i.value=ve()}const B=D(()=>{if(d.value||!c.value)return{};const w={color:i.value,type:s.value};return r.value&&s.value===ee.line&&(w.fill_to=r.value),s.value==ee.scatter&&(w.scatterSymbolSize=S.value),{[c.value]:w}});function P(){o("update:modelValue",B.value)}return j(()=>n.modelValue,()=>{if([c.value]=Object.keys(n.modelValue),d.value=!1,c.value&&n.modelValue){const w=n.modelValue[c.value];i.value=w.color||ve(),s.value=w.type||ee.line,r.value=w.fill_to||""}},{immediate:!0}),Ht([i,s,r,S],()=>{P()},{debounce:200}),(w,k)=>{const h=Oe,u=kt,g=hn,I=bt,f=Qn,m=Se,T=fn,H=It,N=pn;return v(),_("div",null,[O("div",ui,[O("div",di,[k[5]||(k[5]=O("label",{for:"plotTypeSelector",class:"form-label"},"Type",-1)),y(h,{id:"plotTypeSelector",modelValue:a(s),"onUpdate:modelValue":k[0]||(k[0]=E=>X(s)?s.value=E:null),class:"text-left",size:"small",options:a(p)},null,8,["modelValue","options"])]),O("div",ci,[k[6]||(k[6]=O("label",{for:"selAvailableIndicator",class:"colsel"},"Color",-1)),y(T,null,{default:L(()=>[y(g,{class:"p-0!"},{default:L(()=>[y(u,{modelValue:a(i),"onUpdate:modelValue":k[1]||(k[1]=E=>X(i)?i.value=E:null),type:"color",class:"m-auto"},null,8,["modelValue"])]),_:1}),y(I,{id:"colsel",modelValue:a(i),"onUpdate:modelValue":k[2]||(k[2]=E=>X(i)?i.value=E:null),size:"small",class:"grow"},null,8,["modelValue"]),y(g,null,{default:L(()=>[y(m,{severity:"primary",size:"small",onClick:C},{icon:L(()=>[y(f)]),_:1})]),_:1})]),_:1})])]),a(s)===a(ee).line?(v(),G(H,{key:0,modelValue:a(r),"onUpdate:modelValue":k[3]||(k[3]=E=>X(r)?r.value=E:null),columns:t.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):A("",!0),a(s)===a(ee).scatter?(v(),_("div",pi,[k[7]||(k[7]=O("label",{for:"scatterSymbolSize",class:"text-nowrap"},"Scatter symbol size",-1)),y(N,{id:"scatterSymbolSize",modelValue:a(S),"onUpdate:modelValue":k[4]||(k[4]=E=>X(S)?S.value=E:null),min:0,"show-buttons":"",size:"small","button-layout":"horizontal",class:"text-center w-full"},null,8,["modelValue"])])):A("",!0)])}}});var hi=({dt:t})=>`
.p-listbox {
    background: ${t("listbox.background")};
    color: ${t("listbox.color")};
    border: 1px solid ${t("listbox.border.color")};
    border-radius: ${t("listbox.border.radius")};
    transition: background ${t("listbox.transition.duration")}, color ${t("listbox.transition.duration")}, border-color ${t("listbox.transition.duration")},
            box-shadow ${t("listbox.transition.duration")}, outline-color ${t("listbox.transition.duration")};
    outline-color: transparent;
    box-shadow: ${t("listbox.shadow")};
}

.p-listbox.p-disabled {
    opacity: 1;
    background: ${t("listbox.disabled.background")};
    color: ${t("listbox.disabled.color")};
}

.p-listbox.p-disabled .p-listbox-option {
    color: ${t("listbox.disabled.color")};
}

.p-listbox.p-invalid {
    border-color: ${t("listbox.invalid.border.color")};
}

.p-listbox-header {
    padding: ${t("listbox.list.header.padding")};
}

.p-listbox-filter {
    width: 100%;
}

.p-listbox-list-container {
    overflow: auto;
}

.p-listbox-list {
    list-style-type: none;
    margin: 0;
    padding: ${t("listbox.list.padding")};
    outline: 0 none;
    display: flex;
    flex-direction: column;
    gap: ${t("listbox.list.gap")};
}

.p-listbox-option {
    display: flex;
    align-items: center;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    padding: ${t("listbox.option.padding")};
    border: 0 none;
    border-radius: ${t("listbox.option.border.radius")};
    color: ${t("listbox.option.color")};
    transition: background ${t("listbox.transition.duration")}, color ${t("listbox.transition.duration")}, border-color ${t("listbox.transition.duration")},
            box-shadow ${t("listbox.transition.duration")}, outline-color ${t("listbox.transition.duration")};
}

.p-listbox-striped li:nth-child(even of .p-listbox-option) {
    background: ${t("listbox.option.striped.background")};
}

.p-listbox .p-listbox-list .p-listbox-option.p-listbox-option-selected {
    background: ${t("listbox.option.selected.background")};
    color: ${t("listbox.option.selected.color")};
}

.p-listbox:not(.p-disabled) .p-listbox-option.p-listbox-option-selected.p-focus {
    background: ${t("listbox.option.selected.focus.background")};
    color: ${t("listbox.option.selected.focus.color")};
}

.p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled).p-focus {
    background: ${t("listbox.option.focus.background")};
    color: ${t("listbox.option.focus.color")};
}

.p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled):hover {
    background: ${t("listbox.option.focus.background")};
    color: ${t("listbox.option.focus.color")};
}

.p-listbox-option-blank-icon {
    flex-shrink: 0;
}

.p-listbox-option-check-icon {
    position: relative;
    flex-shrink: 0;
    margin-inline-start: ${t("listbox.checkmark.gutter.start")};
    margin-inline-end: ${t("listbox.checkmark.gutter.end")};
    color: ${t("listbox.checkmark.color")};
}

.p-listbox-option-group {
    margin: 0;
    padding: ${t("listbox.option.group.padding")};
    color: ${t("listbox.option.group.color")};
    background: ${t("listbox.option.group.background")};
    font-weight: ${t("listbox.option.group.font.weight")};
}

.p-listbox-empty-message {
    padding: ${t("listbox.empty.message.padding")};
}
`,mi={root:function(e){var n=e.instance,o=e.props;return["p-listbox p-component",{"p-listbox-striped":o.striped,"p-disabled":o.disabled,"p-invalid":n.$invalid}]},header:"p-listbox-header",pcFilter:"p-listbox-filter",listContainer:"p-listbox-list-container",list:"p-listbox-list",optionGroup:"p-listbox-option-group",option:function(e){var n=e.instance,o=e.props,l=e.option,i=e.index,s=e.getItemOptions;return["p-listbox-option",{"p-listbox-option-selected":n.isSelected(l)&&o.highlightOnSelect,"p-focus":n.focusedOptionIndex===n.getOptionIndex(i,s),"p-disabled":n.isOptionDisabled(l)}]},optionCheckIcon:"p-listbox-option-check-icon",optionBlankIcon:"p-listbox-option-blank-icon",emptyMessage:"p-listbox-empty-message"},bi=Ne.extend({name:"listbox",style:hi,classes:mi}),gi={name:"BaseListbox",extends:ht,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,listStyle:null,scrollHeight:{type:String,default:"14rem"},dataKey:null,multiple:{type:Boolean,default:!1},metaKeySelection:{type:Boolean,default:!1},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!0},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},filterIcon:{type:String,default:void 0},striped:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:bi,provide:function(){return{$pcListbox:this,$parentInstance:this}}};function Ee(t){return Oi(t)||xi(t)||yi(t)||vi()}function vi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yi(t,e){if(t){if(typeof t=="string")return Ue(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(t,e):void 0}}function xi(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oi(t){if(Array.isArray(t))return Ue(t)}function Ue(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var qe={name:"Listbox",extends:gi,inheritAttrs:!1,emits:["change","focus","blur","filter","item-dblclick","option-dblclick"],list:null,virtualScroller:null,optionTouched:!1,startRangeIndex:-1,searchTimeout:null,searchValue:"",data:function(){return{filterValue:null,focused:!1,focusedOptionIndex:-1}},watch:{options:function(){this.autoUpdateModel()}},mounted:function(){this.autoUpdateModel()},methods:{getOptionIndex:function(e,n){return this.virtualScrollerDisabled?e:n&&n(e).index},getOptionLabel:function(e){return this.optionLabel?ue(e,this.optionLabel):typeof e=="string"?e:null},getOptionValue:function(e){return this.optionValue?ue(e,this.optionValue):e},getOptionRenderKey:function(e,n){return(this.dataKey?ue(e,this.dataKey):this.getOptionLabel(e))+"_"+n},getPTOptions:function(e,n,o,l){return this.ptm(l,{context:{selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(o,n),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?ue(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return ue(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return ue(e,this.optionGroupChildren)},getAriaPosInset:function(e){var n=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(o){return n.isOptionGroup(o)}).length:e)+1},onFirstHiddenFocus:function(){De(this.list);var e=et(this.$el,':not([data-p-hidden-focusable="true"])');this.$refs.lastHiddenFocusableElement.tabIndex=Zt(e)?void 0:-1,this.$refs.firstHiddenFocusableElement.tabIndex=-1},onLastHiddenFocus:function(e){var n=e.relatedTarget;if(n===this.list){var o=et(this.$el,':not([data-p-hidden-focusable="true"])');De(o),this.$refs.firstHiddenFocusableElement.tabIndex=void 0}else De(this.$refs.firstHiddenFocusableElement);this.$refs.lastHiddenFocusableElement.tabIndex=-1},onFocusout:function(e){!this.$el.contains(e.relatedTarget)&&this.$refs.lastHiddenFocusableElement&&this.$refs.firstHiddenFocusableElement&&(this.$refs.lastHiddenFocusableElement.tabIndex=this.$refs.firstHiddenFocusableElement.tabIndex=void 0)},onListFocus:function(e){this.focused=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.findSelectedOptionIndex(),this.autoUpdateModel(),this.$emit("focus",e)},onListBlur:function(e){this.focused=!1,this.focusedOptionIndex=this.startRangeIndex=-1,this.searchValue="",this.$emit("blur",e)},onListKeyDown:function(e){var n=this,o=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onSpaceKey(e);break;case"Tab":break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break;default:if(this.multiple&&e.code==="KeyA"&&o){var l=this.visibleOptions.filter(function(i){return n.isValidOption(i)}).map(function(i){return n.getOptionValue(i)});this.updateModel(e,l),e.preventDefault();break}!o&&Gt(e.key)&&(this.searchOptions(e,e.key),e.preventDefault());break}},onOptionSelect:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;this.disabled||this.isOptionDisabled(n)||(this.multiple?this.onOptionSelectMultiple(e,n):this.onOptionSelectSingle(e,n),this.optionTouched=!1,o!==-1&&(this.focusedOptionIndex=o))},onOptionMouseDown:function(e,n){this.changeFocusedOptionIndex(e,n)},onOptionMouseMove:function(e,n){this.focusOnHover&&this.focused&&this.changeFocusedOptionIndex(e,n)},onOptionTouchEnd:function(){this.disabled||(this.optionTouched=!0)},onOptionDblClick:function(e,n){this.$emit("item-dblclick",{originalEvent:e,value:n}),this.$emit("option-dblclick",{originalEvent:e,value:n})},onOptionSelectSingle:function(e,n){var o=this.isSelected(n),l=!1,i=null,s=this.optionTouched?!1:this.metaKeySelection;if(s){var p=e&&(e.metaKey||e.ctrlKey);o?p&&(i=null,l=!0):(i=this.getOptionValue(n),l=!0)}else i=o?null:this.getOptionValue(n),l=!0;l&&this.updateModel(e,i)},onOptionSelectMultiple:function(e,n){var o=this.isSelected(n),l=null,i=this.optionTouched?!1:this.metaKeySelection;if(i){var s=e.metaKey||e.ctrlKey;o?l=s?this.removeOption(n):[this.getOptionValue(n)]:(l=s?this.d_value||[]:[],l=[].concat(Ee(l),[this.getOptionValue(n)]))}else l=o?this.removeOption(n):[].concat(Ee(this.d_value||[]),[this.getOptionValue(n)]);this.updateModel(e,l)},onOptionSelectRange:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(o===-1&&(o=this.findNearestSelectedOptionIndex(l,!0)),l===-1&&(l=this.findNearestSelectedOptionIndex(o)),o!==-1&&l!==-1){var i=Math.min(o,l),s=Math.max(o,l),p=this.visibleOptions.slice(i,s+1).filter(function(c){return n.isValidOption(c)}).map(function(c){return n.getOptionValue(c)});this.updateModel(e,p)}},onFilterChange:function(e){this.$emit("filter",{originalEvent:e,value:e.target.value,filterValue:this.visibleOptions}),this.focusedOptionIndex=this.startRangeIndex=-1},onFilterBlur:function(){this.focusedOptionIndex=this.startRangeIndex=-1},onFilterKeyDown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break}},onArrowDownKey:function(e){var n=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.findFirstFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex,n),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowUpKey:function(e){var n=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.findLastFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,n,this.startRangeIndex),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowLeftKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;e.shiftKey?o.setSelectionRange(0,e.target.selectionStart):(o.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else{var l=e.metaKey||e.ctrlKey,i=this.findFirstOptionIndex();this.multiple&&e.shiftKey&&l&&this.onOptionSelectRange(e,i,this.startRangeIndex),this.changeFocusedOptionIndex(e,i)}e.preventDefault()},onEndKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;if(e.shiftKey)o.setSelectionRange(e.target.selectionStart,o.value.length);else{var l=o.value.length;o.setSelectionRange(l,l),this.focusedOptionIndex=-1}}else{var i=e.metaKey||e.ctrlKey,s=this.findLastOptionIndex();this.multiple&&e.shiftKey&&i&&this.onOptionSelectRange(e,this.startRangeIndex,s),this.changeFocusedOptionIndex(e,s)}e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.focusedOptionIndex!==-1&&(this.multiple&&e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex):this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]))},onSpaceKey:function(e){e.preventDefault(),this.onEnterKey(e)},onShiftKey:function(){this.startRangeIndex=this.focusedOptionIndex},isOptionMatched:function(e){var n;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((n=this.getOptionLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return we(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isEquals:function(e,n){return Qe(e,n,this.equalityKey)},isSelected:function(e){var n=this,o=this.getOptionValue(e);return this.multiple?(this.d_value||[]).some(function(l){return n.isEquals(l,o)}):this.isEquals(this.d_value,o)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(n){return e.isValidOption(n)})},findLastOptionIndex:function(){var e=this;return _e(this.visibleOptions,function(n){return e.isValidOption(n)})},findNextOptionIndex:function(e){var n=this,o=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidOption(l)}):-1;return o>-1?o+e+1:e},findPrevOptionIndex:function(e){var n=this,o=e>0?_e(this.visibleOptions.slice(0,e),function(l){return n.isValidOption(l)}):-1;return o>-1?o:e},findSelectedOptionIndex:function(){var e=this;if(this.$filled)if(this.multiple){for(var n=function(){var s=e.d_value[l],p=e.visibleOptions.findIndex(function(c){return e.isValidSelectedOption(c)&&e.isEquals(s,e.getOptionValue(c))});if(p>-1)return{v:p}},o,l=this.d_value.length-1;l>=0;l--)if(o=n(),o)return o.v}else return this.visibleOptions.findIndex(function(i){return e.isValidSelectedOption(i)});return-1},findFirstSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)}):-1},findLastSelectedOptionIndex:function(){var e=this;return this.$filled?_e(this.visibleOptions,function(n){return e.isValidSelectedOption(n)}):-1},findNextSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o+e+1:-1},findPrevSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e>0?_e(this.visibleOptions.slice(0,e),function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o:-1},findNearestSelectedOptionIndex:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=-1;return this.$filled&&(n?(o=this.findPrevSelectedOptionIndex(e),o=o===-1?this.findNextSelectedOptionIndex(e):o):(o=this.findNextSelectedOptionIndex(e),o=o===-1?this.findPrevSelectedOptionIndex(e):o)),o>-1?o:e},findFirstFocusedOptionIndex:function(){var e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,n){var o=this;this.searchValue=(this.searchValue||"")+n;var l=-1;we(this.searchValue)&&(this.focusedOptionIndex!==-1?(l=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}),l=l===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}):l+this.focusedOptionIndex):l=this.visibleOptions.findIndex(function(i){return o.isOptionMatched(i)}),l===-1&&this.focusedOptionIndex===-1&&(l=this.findFirstFocusedOptionIndex()),l!==-1&&this.changeFocusedOptionIndex(e,l)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){o.searchValue="",o.searchTimeout=null},500)},removeOption:function(e){var n=this;return this.d_value.filter(function(o){return!Qe(o,n.getOptionValue(e),n.equalityKey)})},changeFocusedOptionIndex:function(e,n){this.focusedOptionIndex!==n&&(this.focusedOptionIndex=n,this.scrollInView(),this.selectOnFocus&&!this.multiple&&this.onOptionSelect(e,this.visibleOptions[n]))},scrollInView:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var o=n!==-1?"".concat(e.$id,"_").concat(n):e.focusedOptionId,l=Nt(e.list,'li[id="'.concat(o,'"]'));l?l.scrollIntoView&&l.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(n!==-1?n:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&!this.multiple&&this.focused&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex]))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},listRef:function(e,n){this.list=e,n&&n(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{optionsListFlat:function(){return this.filterValue?Je.filter(this.options,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale):this.options},optionsListGroup:function(){var e=this,n=[];return(this.options||[]).forEach(function(o){var l=e.getOptionGroupChildren(o)||[],i=e.filterValue?Je.filter(l,e.searchFields,e.filterValue,e.filterMatchMode,e.filterLocale):l;i!=null&&i.length&&n.push.apply(n,[{optionGroup:o,group:!0}].concat(Ee(i)))}),n},visibleOptions:function(){return this.optionGroupLabel?this.optionsListGroup:this.optionsListFlat},hasSelectedOption:function(){return we(this.d_value)},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return we(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}",this.multiple?this.d_value.length:"1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.$id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(n){return!e.isOptionGroup(n)}).length},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions},containerDataP:function(){return pt({invalid:this.$invalid,disabled:this.disabled})}},directives:{ripple:jt},components:{InputText:bt,VirtualScroller:Ut,InputIcon:Kt,IconField:zt,SearchIcon:Rt,CheckIcon:Ft,BlankIcon:Bt}},Si=["id","data-p"],Ii=["tabindex"],ki=["id","aria-multiselectable","aria-label","aria-labelledby","aria-activedescendant","aria-disabled"],wi=["id"],_i=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousedown","onMousemove","onDblclick","data-p-selected","data-p-focused","data-p-disabled"],Ci=["tabindex"];function $i(t,e,n,o,l,i){var s=oe("InputText"),p=oe("SearchIcon"),c=oe("InputIcon"),d=oe("IconField"),r=oe("CheckIcon"),S=oe("BlankIcon"),C=oe("VirtualScroller"),B=qt("ripple");return v(),_("div",M({id:t.$id,class:t.cx("root"),onFocusout:e[7]||(e[7]=function(){return i.onFocusout&&i.onFocusout.apply(i,arguments)}),"data-p":i.containerDataP},t.ptmi("root")),[O("span",M({ref:"firstHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[0]||(e[0]=function(){return i.onFirstHiddenFocus&&i.onFirstHiddenFocus.apply(i,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,Ii),t.$slots.header?(v(),_("div",{key:0,class:tt(t.cx("header"))},[ie(t.$slots,"header",{value:t.d_value,options:i.visibleOptions})],2)):A("",!0),t.filter?(v(),_("div",M({key:1,class:t.cx("header")},t.ptm("header")),[y(d,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:L(function(){return[y(s,{modelValue:l.filterValue,"onUpdate:modelValue":e[1]||(e[1]=function(P){return l.filterValue=P}),type:"text",class:tt(t.cx("pcFilter")),placeholder:t.filterPlaceholder,role:"searchbox",autocomplete:"off",disabled:t.disabled,unstyled:t.unstyled,"aria-owns":t.$id+"_list","aria-activedescendant":i.focusedOptionId,tabindex:!t.disabled&&!l.focused?t.tabindex:-1,onInput:i.onFilterChange,onBlur:i.onFilterBlur,onKeydown:i.onFilterKeyDown,pt:t.ptm("pcFilter")},null,8,["modelValue","class","placeholder","disabled","unstyled","aria-owns","aria-activedescendant","tabindex","onInput","onBlur","onKeydown","pt"]),y(c,{unstyled:t.unstyled,pt:t.ptm("pcFilterIconContainer")},{default:L(function(){return[ie(t.$slots,"filtericon",{},function(){return[t.filterIcon?(v(),_("span",M({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(v(),G(p,Xt(M({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),O("span",M({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),K(i.filterResultMessageText),17)],16)):A("",!0),O("div",M({class:t.cx("listContainer"),style:[{"max-height":i.virtualScrollerDisabled?t.scrollHeight:""},t.listStyle]},t.ptm("listContainer")),[y(C,M({ref:i.virtualScrollerRef},t.virtualScrollerOptions,{items:i.visibleOptions,style:[{height:t.scrollHeight},t.listStyle],tabindex:-1,disabled:i.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),Yt({content:L(function(P){var w=P.styleClass,k=P.contentRef,h=P.items,u=P.getItemOptions,g=P.contentStyle,I=P.itemSize;return[O("ul",M({ref:function(m){return i.listRef(m,k)},id:t.$id+"_list",class:[t.cx("list"),w],style:g,tabindex:-1,role:"listbox","aria-multiselectable":t.multiple,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-activedescendant":l.focused?i.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[3]||(e[3]=function(){return i.onListFocus&&i.onListFocus.apply(i,arguments)}),onBlur:e[4]||(e[4]=function(){return i.onListBlur&&i.onListBlur.apply(i,arguments)}),onKeydown:e[5]||(e[5]=function(){return i.onListKeyDown&&i.onListKeyDown.apply(i,arguments)})},t.ptm("list")),[(v(!0),_(Ce,null,gt(h,function(f,m){return v(),_(Ce,{key:i.getOptionRenderKey(f,i.getOptionIndex(m,u))},[i.isOptionGroup(f)?(v(),_("li",M({key:0,id:t.$id+"_"+i.getOptionIndex(m,u),style:{height:I?I+"px":void 0},class:t.cx("optionGroup"),role:"option",ref_for:!0},t.ptm("optionGroup")),[ie(t.$slots,"optiongroup",{option:f.optionGroup,index:i.getOptionIndex(m,u)},function(){return[Y(K(i.getOptionGroupLabel(f.optionGroup)),1)]})],16,wi)):vt((v(),_("li",M({key:1,id:t.$id+"_"+i.getOptionIndex(m,u),style:{height:I?I+"px":void 0},class:t.cx("option",{option:f,index:m,getItemOptions:u}),role:"option","aria-label":i.getOptionLabel(f),"aria-selected":i.isSelected(f),"aria-disabled":i.isOptionDisabled(f),"aria-setsize":i.ariaSetSize,"aria-posinset":i.getAriaPosInset(i.getOptionIndex(m,u)),onClick:function(H){return i.onOptionSelect(H,f,i.getOptionIndex(m,u))},onMousedown:function(H){return i.onOptionMouseDown(H,i.getOptionIndex(m,u))},onMousemove:function(H){return i.onOptionMouseMove(H,i.getOptionIndex(m,u))},onTouchend:e[2]||(e[2]=function(T){return i.onOptionTouchEnd()}),onDblclick:function(H){return i.onOptionDblClick(H,f)},ref_for:!0},i.getPTOptions(f,u,m,"option"),{"data-p-selected":!t.checkmark&&i.isSelected(f),"data-p-focused":l.focusedOptionIndex===i.getOptionIndex(m,u),"data-p-disabled":i.isOptionDisabled(f)}),[t.checkmark?(v(),_(Ce,{key:0},[i.isSelected(f)?(v(),G(r,M({key:0,class:t.cx("optionCheckIcon"),ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(v(),G(S,M({key:1,class:t.cx("optionBlankIcon"),ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):A("",!0),ie(t.$slots,"option",{option:f,selected:i.isSelected(f),index:i.getOptionIndex(m,u)},function(){return[Y(K(i.getOptionLabel(f)),1)]})],16,_i)),[[B]])],64)}),128)),l.filterValue&&(!h||h&&h.length===0)?(v(),_("li",M({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[ie(t.$slots,"emptyfilter",{},function(){return[Y(K(i.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(v(),_("li",M({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[ie(t.$slots,"empty",{},function(){return[Y(K(i.emptyMessageText),1)]})],16)):A("",!0)],16,ki)]}),_:2},[t.$slots.loader?{name:"loader",fn:L(function(P){var w=P.options;return[ie(t.$slots,"loader",{options:w})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),ie(t.$slots,"footer",{value:t.d_value,options:i.visibleOptions}),!t.options||t.options&&t.options.length===0?(v(),_("span",M({key:2,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),K(i.emptyMessageText),17)):A("",!0),O("span",M({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),K(i.selectedMessageText),17),O("span",M({ref:"lastHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[6]||(e[6]=function(){return i.onLastHiddenFocus&&i.onLastHiddenFocus.apply(i,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,Ci)],16,Si)}qe.render=$i;var He,st;function Mi(){if(st)return He;st=1;var t=function(u){return e(u)&&!n(u)};function e(h){return!!h&&typeof h=="object"}function n(h){var u=Object.prototype.toString.call(h);return u==="[object RegExp]"||u==="[object Date]"||i(h)}var o=typeof Symbol=="function"&&Symbol.for,l=o?Symbol.for("react.element"):60103;function i(h){return h.$$typeof===l}function s(h){return Array.isArray(h)?[]:{}}function p(h,u){return u.clone!==!1&&u.isMergeableObject(h)?w(s(h),h,u):h}function c(h,u,g){return h.concat(u).map(function(I){return p(I,g)})}function d(h,u){if(!u.customMerge)return w;var g=u.customMerge(h);return typeof g=="function"?g:w}function r(h){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(h).filter(function(u){return Object.propertyIsEnumerable.call(h,u)}):[]}function S(h){return Object.keys(h).concat(r(h))}function C(h,u){try{return u in h}catch{return!1}}function B(h,u){return C(h,u)&&!(Object.hasOwnProperty.call(h,u)&&Object.propertyIsEnumerable.call(h,u))}function P(h,u,g){var I={};return g.isMergeableObject(h)&&S(h).forEach(function(f){I[f]=p(h[f],g)}),S(u).forEach(function(f){B(h,f)||(C(h,f)&&g.isMergeableObject(u[f])?I[f]=d(f,g)(h[f],u[f],g):I[f]=p(u[f],g))}),I}function w(h,u,g){g=g||{},g.arrayMerge=g.arrayMerge||c,g.isMergeableObject=g.isMergeableObject||t,g.cloneUnlessOtherwiseSpecified=p;var I=Array.isArray(u),f=Array.isArray(h),m=I===f;return m?I?g.arrayMerge(h,u,g):P(h,u,g):p(u,g)}w.all=function(u,g){if(!Array.isArray(u))throw new Error("first argument should be an array");return u.reduce(function(I,f){return w(I,f,g)},{})};var k=w;return He=k,He}var Li=Mi();const Pi=Wt(Li),Be=V({BollingerBands:{main_plot:{bb_upperband:{color:"#008af4",type:"line",fill_to:"bb_lowerband"},bb_lowerband:{color:"#008af4",type:"line"}}},RSI:{subplots:{RSI:{rsi:{color:"#ff8000",type:"line"}}}},MACD:{subplots:{MACD:{macdsignal:{color:"#ff8000",type:"line"},macd:{color:"#1370f4",type:"line"}}}}});function at(t,e){const n=ze(t);if(!e)return n;const o={};for(const i in t.main_plot){const s=e[i]||i;o[s]=t.main_plot[i],o[s].fill_to!==void 0&&(o[s].fill_to=e[o[s].fill_to]||o[s].fill_to)}"main_plot"in t&&(n.main_plot=o);const l={};for(const i in t.subplots){const s={};for(const p in t.subplots[i]){const c=e[p]||p;s[c]=t.subplots[i][p],s[c].fill_to!==void 0&&(s[c].fill_to=e[s[c].fill_to]||s[c].fill_to)}l[i]=s}return"subplots"in t&&(n.subplots=l),n}function Vi(){function t(n){return Be.value[n]||{}}function e(n,o,l={}){const i=t(n);if(!i)return o;const s=at(i,l);return Pi(o,s)}return{plotTemplates:Be,applyPlotTemplate:e,getTemplateContent:t,replaceTemplateColumns:at,plotTemplateNames:D(()=>Object.keys(Be.value))}}const Ti={key:0,class:"pt-1"},Ai={key:0,class:"w-full"},Di={key:1},Ei=["for"],Hi={class:"mt-2 flex gap-1 justify-end"},Bi=re({__name:"PlotFromTemplate",props:Jt({columns:{}},{visible:{type:Boolean},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=Qt(t,"visible"),{plotTemplateNames:n,applyPlotTemplate:o,getTemplateContent:l}=Vi(),i=$e();function s(){c.value&&(i.editablePlotConfig={...o(c.value,i.editablePlotConfig,d.value)},e.value=!1)}function p(){r.value=!r.value,d.value=en(l(c.value)).reduce((S,C)=>(S[C]=C,S),{})}const c=V("");j(()=>e.value,S=>{S&&(c.value="",r.value=!1)});const d=V({}),r=V(!1);return(S,C)=>{const B=qe,P=Oe,w=ft,k=Se,h=bn;return e.value?(v(),_("div",Ti,[a(r)?(v(),_("div",Di,[C[3]||(C[3]=O("h5",{class:"mt-1 text-center text-md mb-1"},"Re-map indicators",-1)),(v(!0),_(Ce,null,gt(Object.keys(a(d)),u=>(v(),_("div",{key:u,class:"flex gap-2 align-center"},[O("label",{for:`indicator-${u}`,class:"grow w-full"},K(u),9,Ei),y(P,{id:`indicator-${u}`,modelValue:a(d)[u],"onUpdate:modelValue":g=>a(d)[u]=g,class:"grow w-full",size:"small",options:S.columns},null,8,["id","modelValue","onUpdate:modelValue","options"])]))),128))])):(v(),_("div",Ai,[C[2]||(C[2]=O("label",{for:"selectTemplate"},"Select Template",-1)),y(B,{id:"selectTemplate",modelValue:a(c),"onUpdate:modelValue":C[0]||(C[0]=u=>X(c)?c.value=u:null),options:a(n),"select-size":4},null,8,["modelValue","options"])])),O("div",Hi,[y(k,{size:"small",title:"Abort",severity:"secondary",onClick:C[1]||(C[1]=u=>e.value=!1)},{default:L(()=>[y(w)]),_:1}),a(r)?A("",!0):(v(),G(k,{key:0,disabled:!a(c),size:"small",style:{width:"33%"},title:"Use template",label:" Use Template",severity:"primary",onClick:p},{icon:L(()=>[y(h,{class:"me-1"})]),_:1},8,["disabled"])),a(r)?(v(),G(k,{key:1,disabled:!a(c),size:"small",style:{width:"33%"},title:"Apply template",severity:"primary",onClick:s},{icon:L(()=>[y(h,{class:"me-1"})]),default:L(()=>[C[4]||(C[4]=Y(" Apply Template "))]),_:1},8,["disabled"])):A("",!0)])])):A("",!0)}}}),wt=re({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{type:String,default:"plot configuration"}},setup(t){const e=$e();return(n,o)=>{const l=Oe,i=Ot;return v(),G(i,{modelValue:a(e).plotConfigName,"onUpdate:modelValue":o[1]||(o[1]=s=>a(e).plotConfigName=s),"allow-edit":t.allowEdit,"allow-add":t.allowEdit,"allow-duplicate":t.allowEdit,"editable-name":"plot configuration",onRename:a(e).renamePlotConfig,onDelete:a(e).deletePlotConfig,onNew:a(e).newPlotConfig,onDuplicate:a(e).duplicatePlotConfig},{default:L(()=>[y(l,{id:"plotConfigSelect",modelValue:a(e).plotConfigName,"onUpdate:modelValue":[o[0]||(o[0]=s=>a(e).plotConfigName=s),a(e).plotConfigChanged],options:a(e).availablePlotConfigNames,class:"w-full text-left",size:"small"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),Fi={key:0},Ri={class:"flex flex-row mt-1 gap-1"},zi={class:"flex flex-row gap-1"},Ki={key:3,class:"w-full ms-1 mt-2"},Ui=re({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},isVisible:{required:!1,default:!1,type:Boolean}},setup(t){const e=t,n=$e(),o=yt(),l=V("default"),i=V(""),s=V(!1),p=V(!1),c=V("main_plot"),d=V(),r=V(!0),S=D(()=>c.value==="main_plot"),C=D(()=>S.value?n.editablePlotConfig.main_plot:n.editablePlotConfig.subplots[c.value]),B=D(()=>["main_plot",...Object.keys(n.editablePlotConfig.subplots)]),P=D(()=>{let $=[];return S.value&&($=Object.keys(n.editablePlotConfig.main_plot)),c.value in n.editablePlotConfig.subplots&&($=Object.keys(n.editablePlotConfig.subplots[c.value])),$.map(b=>({value:b,text:e.columns.includes(b)?b:`${b} <-- not available in this chart`}))});function w($){const b=Object.keys($)[0],W=$[b];S.value?n.editablePlotConfig.main_plot[b]={...W}:n.editablePlotConfig.subplots[c.value][b]={...W},n.editablePlotConfig={...n.editablePlotConfig},s.value=!1}const k=D({get(){return s.value?{}:i.value?{[i.value]:C.value[i.value]}:{}},set($){Object.keys($)[0]&&$?w($):s.value=!1}}),h=D({get(){return JSON.stringify(n.editablePlotConfig,null,2)},set($){try{d.value=JSON.parse($),r.value=!0}catch{r.value=!1}}});function u(){S.value?(console.log(`Removing ${i.value} from MainPlot`),delete n.editablePlotConfig.main_plot[i.value]):(console.log(`Removing ${i.value} from ${c.value}`),delete n.editablePlotConfig.subplots[c.value][i.value]),n.editablePlotConfig={...n.editablePlotConfig},i.value=""}function g(){s.value=!s.value,i.value=""}function I($){n.editablePlotConfig.subplots={...n.editablePlotConfig.subplots,[$]:{}},c.value=$}function f($){delete n.editablePlotConfig.subplots[$],n.editablePlotConfig={...n.editablePlotConfig},c.value=B.value[B.value.length-1]}function m($,b){n.editablePlotConfig.subplots[b]=n.editablePlotConfig.subplots[$],delete n.editablePlotConfig.subplots[$],c.value=b}function T(){n.editablePlotConfig=ze(n.customPlotConfigs[n.plotConfigName])}function H(){d.value!==void 0&&r.value&&(n.editablePlotConfig=d.value)}async function N(){if(o.activeBot.isWebserverMode&&!o.activeBot.strategy.strategy){nt("No strategy selected, can't load plot config.");return}try{await o.activeBot.getStrategyPlotConfig(),o.activeBot.strategyPlotConfig&&(n.editablePlotConfig=o.activeBot.strategyPlotConfig)}catch{nt("Failed to load Plot configuration from Strategy.")}}function E(){n.saveCustomPlotConfig(l.value,n.editablePlotConfig)}function z($){s.value=!1,$&&(w({[$]:{color:ve()}}),i.value=$)}j(c,()=>{i.value=""}),j(()=>n.plotConfigName,()=>{i.value="",l.value=n.plotConfigName}),j(()=>e.isVisible,()=>{e.isVisible?(n.editablePlotConfig=ze(n.plotConfig),n.isEditing=!0,l.value=n.plotConfigName):n.isEditing=!1});const R=V(!1);return($,b)=>{const W=wt,Z=tn,te=qe,J=Ot,Q=Se,ce=It,Ie=Bi,Me=fi,ke=St;return t.columns?(v(),_("div",Fi,[b[16]||(b[16]=O("label",{for:"idPlotConfigName"},"Plot config name",-1)),y(W,{"allow-edit":""}),y(Z),b[17]||(b[17]=O("label",{for:"fieldSel",class:"mb"},"Target Plot",-1)),y(J,{modelValue:a(c),"onUpdate:modelValue":b[1]||(b[1]=U=>X(c)?c.value=U:null),"allow-edit":!a(S),"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:I,onDelete:f,onRename:m},{default:L(()=>[y(te,{id:"fieldSel",modelValue:a(c),"onUpdate:modelValue":b[0]||(b[0]=U=>X(c)?c.value=U:null),options:a(B),size:"small",pt:{list:{class:"h-30"}}},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"]),y(Z),O("div",null,[b[8]||(b[8]=O("label",{for:"selectedIndicators"},"Indicators in this plot",-1)),y(te,{id:"selectedIndicators",modelValue:a(i),"onUpdate:modelValue":b[2]||(b[2]=U=>X(i)?i.value=U:null),size:"small","empty-message":"No indicators selected","option-label":"text","option-value":"value",disabled:a(s),options:a(P),pt:{list:{class:"h-30"}}},null,8,["modelValue","disabled","options"])]),O("div",Ri,[y(Q,{severity:"secondary",title:"Remove indicator to plot",size:"small",disabled:!a(i),class:"col",onClick:u},{default:L(()=>b[9]||(b[9]=[Y(" Remove indicator ")])),_:1},8,["disabled"]),y(Q,{severity:"secondary",title:"Load indicator config from template",size:"small",onClick:b[3]||(b[3]=U=>R.value=!a(R))},{default:L(()=>b[10]||(b[10]=[Y(" Indicator from template ")])),_:1}),y(Q,{severity:"primary",title:"Add indicator to plot",size:"small",class:"col",disabled:a(s),onClick:g},{default:L(()=>b[11]||(b[11]=[Y(" Add new indicator ")])),_:1},8,["disabled"])]),a(s)?(v(),G(ce,{key:0,columns:t.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:z},null,8,["columns"])):A("",!0),y(Ie,{visible:a(R),"onUpdate:visible":b[4]||(b[4]=U=>X(R)?R.value=U:null),columns:t.columns},null,8,["visible","columns"]),a(i)&&!a(R)?(v(),G(Me,{key:1,modelValue:a(k),"onUpdate:modelValue":b[5]||(b[5]=U=>X(k)?k.value=U:null),class:"mt-1",columns:t.columns},null,8,["modelValue","columns"])):A("",!0),y(Z),O("div",zi,[y(Q,{severity:"secondary",size:"small",disabled:a(s),title:"Reset to last saved configuration",onClick:T},{default:L(()=>b[12]||(b[12]=[Y("Reset")])),_:1},8,["disabled"]),y(Q,{disabled:a(o).activeBot.isWebserverMode&&a(o).activeBot.botApiVersion<2.23||!a(o).activeBot.isBotOnline||a(s),severity:"secondary",size:"small",onClick:N},{default:L(()=>b[13]||(b[13]=[Y(" From strategy ")])),_:1},8,["disabled"]),y(Q,{id:"showButton",severity:"secondary",size:"small",disabled:a(s),title:"Show configuration for easy transfer to a strategy",onClick:b[6]||(b[6]=U=>p.value=!a(p))},{default:L(()=>[Y(K(a(p)?"Hide":"Show"),1)]),_:1},8,["disabled"]),y(Q,{severity:"primary",size:"small","data-toggle":"tooltip",disabled:a(s),title:"Save configuration",onClick:E},{default:L(()=>b[14]||(b[14]=[Y("Save")])),_:1},8,["disabled"])]),a(p)?(v(),G(Q,{key:2,class:"ms-1 mt-1",severity:"secondary",size:"small",title:"Load configuration from text box below",onClick:H},{default:L(()=>b[15]||(b[15]=[Y("Load from String")])),_:1})):A("",!0),a(p)?(v(),_("div",Ki,[y(ke,{id:"TextArea",modelValue:a(h),"onUpdate:modelValue":b[7]||(b[7]=U=>X(h)?h.value=U:null),class:"w-full min-h-[250px]",size:"small",state:a(r)},null,8,["modelValue","state"])])):A("",!0)])):A("",!0)}}}),ji=Ze(Ui,[["__scopeId","data-v-3addaf69"]]);function Ni(t,e,n,o){const l=t.indexOf(n),i=t.indexOf(o),s=l>0&&i>0;return s&&t.push(`${n}-${o}`),e.map(p=>{const c=p.slice();if(s){const d=c===null||c[i]===null||c[l]===null?null:c[i]-c[l];c.push(d)}return c})}function Gi(t){const e=[];return"main_plot"in t&&Object.entries(t.main_plot).forEach(([n,o])=>{o.fill_to&&e.push([n,o.fill_to])}),"subplots"in t&&Object.values(t.subplots).forEach(n=>{Object.entries(n).forEach(([o,l])=>{l.fill_to&&e.push([o,l.fill_to])})}),e}const Zi=2,qi=3,_t=4;function ae(t,e,n=qi){const o=e%t;let l=n===Zi;return n===_t&&(l=o>t/2),e-o+(l?t:0)}function Xi(t,e,n){const o=nn("Shift",{events:["keydown","keyup"]}),l=D(()=>e.value==="dark"?"white":"black"),i=V({x:0,y:0}),s=144,p=V(!0),c=V(!1),d=V(!1),r=35,S=170;function C(u){return ae(n.value,u,_t)}function B(u){p.value&&!d.value&&h(u.offsetX,u.offsetY)}function P(u){var g,I,f,m,T,H,N,E;if(c.value)d.value?(k(),d.value=!1,(H=(T=t.value)==null?void 0:T.chart)==null||H.getZr().off("mousemove",B),(E=(N=t.value)==null?void 0:N.chart)==null||E.getZr().off("mousedown",P)):d.value=!0;else{const z=((g=t.value)==null?void 0:g.convertFromPixel({seriesIndex:0},[u.offsetX,u.offsetY]))??[0,0];z[0]=C(Number(z[0]));const R=((I=t.value)==null?void 0:I.convertToPixel({seriesIndex:0},z))??[0,0];i.value={x:R[0],y:R[1]},(m=(f=t.value)==null?void 0:f.chart)==null||m.getZr().on("mousemove",B),w()}}function w(){var u;c.value=!0,(u=t.value)==null||u.setOption({dataZoom:[{disabled:!0}],graphic:[{type:"rect",shape:{x:i.value.x,width:0,y:i.value.y,height:0},style:{fill:l.value,opacity:.1}},{type:"rect",z:5,shape:{x:i.value.x,width:S,y:i.value.y,height:r,r:5},style:{fill:"#002fff",opacity:.8},textContent:{z:10,style:{text:"0 bars - 0%",font:"14px sans-serif",fill:"white"}},textConfig:{position:"inside"}}]})}function k(){var u;c.value=!1,(u=t.value)==null||u.setOption({dataZoom:[{disabled:!1}],graphic:[{$action:"remove"},{$action:"remove"}]})}function h(u,g){var b,W,Z,te;const I=((b=t.value)==null?void 0:b.convertFromPixel({seriesIndex:0},[i.value.x,i.value.y]))??[0,0],f=((W=t.value)==null?void 0:W.convertFromPixel({seriesIndex:0},[u,g]))??[0,0],m=Number(I[1]),T=Number(f[1]),H=C(Number(I[0])),N=C(Number(f[0])),E=Math.abs(H-N),z=((Z=t.value)==null?void 0:Z.convertToPixel({seriesIndex:0},[N,0])[0])??0,R=on(E,{units:["d","h","m"]}),$=Math.abs((m-T)/m*100).toFixed(2);(te=t.value)==null||te.setOption({graphic:[{shape:{width:z>i.value.x?-1*(i.value.x-z):z-i.value.x,height:g>i.value.y?-1*(i.value.y-g):g-i.value.y}},{shape:{x:i.value.x+(z-i.value.x)/2-S/2,y:g>i.value.y?g-(r+5):g+9},textContent:{style:{textAlign:u<i.value.x?"left":"right",text:`${E/n.value} bars (${m<T?$:"-"+$}%) 
 ${R}`}}}]}),p.value=!1,setTimeout(()=>{p.value=!0},1e3/s)}j(()=>o.value,()=>{var u,g;o.value&&!c.value&&((g=(u=t.value)==null?void 0:u.chart)==null||g.getZr().on("mousedown",P))})}function Yi(t,e){const n=t.indexOf("open"),o=t.indexOf("close"),l=t.indexOf("high"),i=t.indexOf("low");let s;return e.map((p,c)=>{const d=p.slice(),r=c===0?(d[n]+d[o])/2:(s[n]+s[o])/2,S=(d[n]+d[l]+d[i]+d[o])/4,C=Math.max(d[l],d[n],d[o]),B=Math.min(d[i],d[n],d[o]);return d[n]=r,d[o]=S,d[l]=C,d[i]=B,s=d.slice(),d})}function Wi(t){if(!t)return{baseCurrency:"",quoteCurrency:""};const[e,n]=t.split("/");if(n!==void 0){const o=n.split(":");return{baseCurrency:e,quoteCurrency:o[0]||n}}return{baseCurrency:n??"",quoteCurrency:e??""}}function Ct(t,e){return`${t.ft_order_side==="buy"?"+":"-"}${Ke("cost"in t?t.cost:t.amount*t.safe_price,e)}`}function rt(t,e,n,o){let l=`${t.is_short?"Short":"Long"} ${n}
  ${xt(t.profit_ratio)} ${t.profit_abs?"("+Ke(t.profit_abs,o)+")":""}
  ${Ct(e,o)}
  Enter-tag: ${t.enter_tag??""}
  Order Price: ${Ke(e.safe_price,o)}`;return l+=`${"ft_order_tag"in e&&e.ft_order_tag&&t.enter_tag!=e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,l+=`${t.exit_reason?`
Exit-Tag: `+t.exit_reason:""}`,l}function Ji(t,e,n){let o=`${t.is_short?"Short":"Long"} adjustment
  ${Ct(e,n)}
  Enter-tag: ${t.enter_tag??""}`;return o+=`${"ft_order_tag"in e&&e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,o}const Qi="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",ut="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",Fe="#AD00FF",Re="#0066FF";function eo(t,e){const n=[],o=t.data_stop_ts+t.timeframe_ms;for(let l=0,i=e.length;l<i;l+=1){const s=e[l],p=s.open_fill_timestamp??s.open_timestamp;if((ae(t.timeframe_ms??0,s.open_timestamp)<=o||!s.close_timestamp||s.close_timestamp&&s.close_timestamp>=t.data_start_ts)&&s.orders)for(let c=0;c<s.orders.length;c++){const d=s.orders[c],r=d.order_filled_timestamp??("order_timestamp"in d?d.order_timestamp:s.open_timestamp),{quoteCurrency:S}=Wi(s.quote_currency??s.pair??"");r&&ae(t.timeframe_ms??0,r)<=o&&r>t.data_start_ts&&(c===0?n.push([ae(t.timeframe_ms??0,p),d.safe_price,ut,d.ft_order_side=="sell"?180:0,s.is_short?Fe:Re,(s.is_short?"Short":"Long")+(d.order_filled_timestamp?"":" (open)"),rt(s,d,"entry",S)]):c===s.orders.length-1&&s.close_timestamp?ae(t.timeframe_ms??0,s.close_timestamp)<=o&&s.close_timestamp>t.data_start_ts&&s.is_open===!1&&n.push([ae(t.timeframe_ms??0,s.close_timestamp),d.safe_price,ut,s.is_short?0:180,s.is_short?Fe:Re,xt(s.profit_ratio,2),rt(s,d,"exit",S)]):(d.ft_order_side!=="stoploss"||"filled"in d&&(d.filled??0)>0)&&n.push([ae(t.timeframe_ms??0,r),d.safe_price,Qi,d.ft_order_side=="sell"?180:0,s.is_short?Fe:Re,"",Ji(s,d,S)]))}}return{tradeData:n}}function to(t,e,n,o){const{tradeData:l}=eo(n,o),i=o.find(p=>p.is_open),s={name:t,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e!=="dark"?"#fff":"#000",padding:2,color:e==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:p=>p.data?p.data[4]:"#000",opacity:.9},symbol:p=>p[2],symbolRotate:p=>p[3],symbolSize:13,data:l};if(i){const p=n.timeframe_ms*10;s.markLine={symbol:"none",label:{show:!0,position:"middle"},data:[[{name:"Stoploss",yAxis:i.stop_loss_abs,lineStyle:{color:"#ff0000AA",type:"solid"},xAxis:n.data_stop_ts-p>i.open_timestamp?i.open_timestamp:n.data_stop_ts-p},{lineStyle:{color:"#ff0000AA",type:"solid"},yAxis:i.stop_loss_abs,xAxis:i.close_timestamp??n.data_stop_ts+n.timeframe_ms}]]}}return s}function no(t){return t.annotations?{markArea:{label:{position:"insideTop"},data:t.annotations.filter(n=>n.type=="area").map(n=>[{xAxis:n.start,yAxis:n.y_start,itemStyle:{color:n.color},label:{formatter:n.label}},{xAxis:n.end,yAxis:n.y_end}])}}:{}}function je(t,e,n,o,l=0){const i={name:n,type:o.type||"line",xAxisIndex:l,yAxisIndex:l,itemStyle:{color:o.color||ve()},encode:{x:t,y:e},showSymbol:!1};return o.type===ee.scatter&&(i.symbolSize=o.scatterSymbolSize??3,i.emphasis={disabled:!0}),i}function dt(t,e,n,o,l=0){const i={type:ee.line},s=je(t,e,n,i,l),p={stack:n,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:o.color,opacity:.1},tooltip:{show:!1}};return Object.assign(s,p),s}const io={class:"h-full w-full"},ct=55,ge=8,oo="#00ff26",lo="#00ff26",so="#faba25",ao="#faba25",ro=re({__name:"CandleChart",props:{trades:{},dataset:{},heikinAshi:{type:Boolean},useUTC:{type:Boolean},plotConfig:{},theme:{},sliderPosition:{},colorUp:{},colorDown:{},labelSide:{}},setup(t){gn([yn,wn,xn,_n,Cn,On,$n,Sn,Mn,In,Ln,Pn,Vn,Tn,An,Dn,En,kn,Hn]);const e=t,n=D(()=>e.labelSide==="left"),o=n.value?"5.5%":"1%",l=n.value?"1%":"5.5%",i=e.colorUp,s=e.colorUp,p=e.colorDown,c=e.colorDown,d=V(),r=V({}),S=D(()=>e.dataset?e.dataset.strategy:""),C=D(()=>e.dataset?e.dataset.pair:""),B=D(()=>e.dataset?e.dataset.timeframe:""),P=D(()=>e.dataset!==null&&typeof e.dataset=="object"),w=D(()=>e.trades.filter(f=>f.pair===C.value)),k=D(()=>`${S.value} - ${C.value} - ${B.value}`),h=D(()=>Gi(e.plotConfig));Xi(d,it(()=>e.theme),it(()=>e.dataset.timeframe_ms));function u(f=!1){var ke,U,Xe,Ye;if(!P.value)return;(ke=r.value)!=null&&ke.title&&(r.value.title[0].text=k.value);const m=e.dataset.columns.slice(),T=m.findIndex(x=>x==="__date_ts"),H=m.findIndex(x=>x==="open"),N=m.findIndex(x=>x==="high"),E=m.findIndex(x=>x==="low"),z=m.findIndex(x=>x==="close"),R=m.findIndex(x=>x==="volume"),$=m.findIndex(x=>x==="_buy_signal_close"||x==="_enter_long_signal_close"),b=m.findIndex(x=>x==="_sell_signal_close"||x==="_exit_long_signal_close"),W=m.findIndex(x=>x==="_enter_short_signal_close"),Z=m.findIndex(x=>x==="_exit_short_signal_close"),te="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray((U=r.value)==null?void 0:U.dataZoom))if(f){const x=(1-250/e.dataset.length)*100;r.value.dataZoom.forEach((F,ne)=>{r.value&&r.value.dataZoom&&(r.value.dataZoom[ne].start=x)})}else r.value.dataZoom.forEach((x,F)=>{r.value&&r.value.dataZoom&&(delete r.value.dataZoom[F].start,delete r.value.dataZoom[F].end)});let J=e.heikinAshi?Yi(m,e.dataset.data):e.dataset.data.slice();h.value.forEach(([x,F])=>{J=Ni(m,J,x,F)});const Q=Array(J.length>0?J[J.length-2].length:0);Q[T]=J[J.length-1][T]+e.dataset.timeframe_ms*3,J.push(Q);const ce={dataset:{source:J},grid:[{left:o,right:l,bottom:`${te*ge+2}%`},{left:o,right:l,bottom:`${te*ge}%`,height:`${ge}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:i,color0:p,borderColor:s,borderColor0:c},encode:{x:T,y:[H,z,E,N]},...no(e.dataset)},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:T,y:R}}]};if(Array.isArray(ce.series)){const x=[{colData:$,name:"Entry",symbol:"triangle",symbolSize:10,color:oo,tooltipPrefix:"Long entry"},{colData:b,name:"Exit",symbol:"diamond",symbolSize:8,color:so,tooltipPrefix:"Long exit"},{colData:W,name:"Entry",symbol:"triangle",symbolSize:10,symbolRotate:180,color:lo,tooltipPrefix:"Short entry"},{colData:Z,name:"Exit",symbol:"pin",symbolSize:8,color:ao,tooltipPrefix:"Short exit"}];for(const F of x)F.colData>=0&&ce.series.push({name:F.name,type:"scatter",symbol:F.symbol,symbolSize:F.symbolSize,symbolRotate:F.symbolRotate??0,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:F.color},tooltip:{valueFormatter:ne=>ne?`${F.tooltipPrefix} ${ne}`:""},encode:{x:T,y:F.colData}})}if(Object.assign(r.value,ce),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([x,F])=>{var pe,q,le,fe,he,me,be;const ne=m.findIndex(se=>se===x);if(ne>0){if(!Array.isArray((pe=r.value)==null?void 0:pe.legend)&&((le=(q=r.value)==null?void 0:q.legend)!=null&&le.data)&&r.value.legend.data.push(x),Array.isArray((fe=r.value)==null?void 0:fe.series)){if((he=r.value)==null||he.series.push(je(T,ne,x,F)),F.fill_to){const se=`${x}-${F.fill_to}`,Le=m.findIndex(Te=>Te===se),Pe={color:F.color,type:ee.line},Ve=dt(T,Le,x,Pe,0);r.value.series[r.value.series.length-1].stack=x,r.value.series.push(Ve)}(be=r.value)==null||be.series.splice(((me=r.value)==null?void 0:me.series.length)-1,0)}}else console.log(`element ${x} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let x=2;Object.entries(e.plotConfig.subplots).forEach(([F,ne])=>{const pe=x;Array.isArray(r.value.yAxis)&&r.value.yAxis.length<=x&&r.value.yAxis.push({scale:!0,gridIndex:pe,name:F,position:e.labelSide,nameLocation:"middle",nameGap:ct,axisLabel:{show:!0,hideOverlap:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(r.value.xAxis)&&r.value.xAxis.length<=x&&r.value.xAxis.push({type:"time",gridIndex:pe,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(r.value.dataZoom)&&r.value.dataZoom.forEach(q=>q.xAxisIndex&&Array.isArray(q.xAxisIndex)?q.xAxisIndex.push(x):null),r.value.grid&&Array.isArray(r.value.grid)&&r.value.grid.push({left:o,right:l,bottom:`${(te-x+1)*ge}%`,height:`${ge}%`}),Object.entries(ne).forEach(([q,le])=>{var he,me,be;const fe=m.findIndex(se=>se===q);if(fe>0){if(!Array.isArray(r.value.legend)&&((he=r.value.legend)!=null&&he.data)&&r.value.legend.data.push(q),r.value.series&&Array.isArray(r.value.series)){if(r.value.series.push(je(T,fe,q,le,x)),le.fill_to){const se=`${q}-${le.fill_to}`,Le=m.findIndex(Te=>Te===se),Pe={color:le.color,type:ee.line},Ve=dt(T,Le,q,Pe,x);r.value.series[r.value.series.length-1].stack=q,r.value.series.push(Ve)}(be=r.value)==null||be.series.splice(((me=r.value)==null?void 0:me.series.length)-1,0)}}else console.log(`element ${q} was not found in the columns.`)}),x+=1})}Array.isArray(r.value.grid)&&(r.value.grid[r.value.grid.length-1].bottom="50px",delete r.value.grid[r.value.grid.length-1].top);const Ie="Trades";!Array.isArray(r.value.legend)&&((Xe=r.value.legend)!=null&&Xe.data)&&r.value.legend.data.splice(4,0,Ie);const Me=to(Ie,e.theme,e.dataset,w.value);Array.isArray(r.value.series)&&r.value.series.push(Me),(Ye=d.value)==null||Ye.setOption(r.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],notMerge:f})}function g(){var f;(f=d.value)==null||f.setOption({},{notMerge:!0}),r.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%",type:"scroll",pageTextStyle:{color:e.theme==="dark"?"#dedede":"#333"},pageIconColor:e.theme==="dark"?"#aaa":"#2f4554",pageIconInactiveColor:e.theme==="dark"?"#2f4554":"#aaa"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(m,T,H,N,E){const z={top:60},R=m[0]<E.viewSize[0]/2;return z[["left","right"][+R]]=R?5:60,z}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,max:m=>m.max+(m.max-m.min)*.02,min:m=>m.min-(m.max-m.min)*.04,position:e.labelSide},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",position:e.labelSide,nameGap:ct,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...Bn}]},console.log("Initialized"),u(!0)}function I(){if(!e.sliderPosition)return;const f=e.sliderPosition.startValue-e.dataset.timeframe_ms*40,m=e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80;d.value&&d.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:f,endValue:m})}return Ge(()=>{g()}),j([()=>e.useUTC,()=>e.theme,()=>e.plotConfig],()=>g()),j([()=>e.dataset,()=>e.heikinAshi],()=>u()),j(()=>e.sliderPosition,()=>I()),(f,m)=>(v(),_("div",io,[a(P)?(v(),G(a(vn),{key:0,ref_key:"candleChart",ref:d,theme:f.theme,autoresize:"","manual-update":""},null,8,["theme"])):A("",!0)]))}}),uo=Ze(ro,[["__scopeId","data-v-bf6dc911"]]),co={class:"flex h-full"},po={class:"flex-fill w-full flex-col align-items-stretch flex h-full"},fo={class:"flex me-0"},ho={class:"ms-1 md:ms-2 flex flex-wrap md:flex-nowrap items-center gap-1"},mo={class:"md:ms-2 text-nowrap"},bo={class:"flex flex-col"},go={class:"flex flex-row flex-wrap"},vo={key:0,class:"ms-2 text-sm text-nowrap",title:"Long entry signals"},yo={key:1,class:"ms-2 text-sm text-nowrap",title:"Long exit signals"},xo={class:"flex flex-row flex-wrap"},Oo={key:0,class:"ms-2 text-sm text-nowrap"},So={key:1,class:"ms-2 text-sm text-nowrap"},Io={class:"ms-auto flex items-center"},ko={class:"ms-2"},wo={class:"ms-2 me-0 md:me-1"},_o={class:"h-full flex"},Co={class:"min-w-0 w-full shrink"},$o={key:1,class:"m-auto"},Mo={key:1,class:"text-lg"},Lo={key:2},Po={key:0,class:"grow border rounded-md ps-1 border-surface-300 dark:border-surface-700"},Vo=re({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},strategy:{required:!1,default:"",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},emits:["refreshData"],setup(t,{emit:e}){const n=t,o=e,l=ln(),i=sn(),s=yt(),p=$e(),c=V(),d=D(()=>{var I,f;return n.historicView?(I=s.activeBot.history[`${s.activeBot.plotPair}__${n.timeframe}`])==null?void 0:I.data:(f=s.activeBot.candleData[`${s.activeBot.plotPair}__${n.timeframe}`])==null?void 0:f.data}),r=D(()=>{var I;return n.strategy||((I=d.value)==null?void 0:I.strategy)||""}),S=D(()=>d.value?d.value.all_columns??d.value.columns:[]),C=D(()=>d.value?d.value.columns??d.value.all_columns:[]),B=D(()=>d.value&&d.value.data.length>0),P=D(()=>n.historicView?s.activeBot.historyStatus===de.loading:s.activeBot.candleDataStatus===de.loading),w=D(()=>{switch(n.historicView?s.activeBot.historyStatus:s.activeBot.candleDataStatus){case de.not_loaded:return"Not loaded yet.";case de.loading:return"Loading...";case de.success:return"No data available";case de.error:return"Failed to load data";default:return"Unknown"}}),k=V(!1);function h(){n.plotConfigModal?k.value=!k.value:c.value=!c.value}function u(){o("refreshData",s.activeBot.plotPair,p.usedColumns)}function g(){B.value||u()}return j(()=>n.availablePairs,()=>{n.availablePairs.find(I=>I===s.activeBot.plotPair)||([s.activeBot.plotPair]=n.availablePairs,u())}),j(()=>s.activeBot.selectedPair,()=>{s.activeBot.plotPair=s.activeBot.selectedPair}),j(()=>s.activeBot.plotPair,()=>{n.historicView||u()}),j(()=>p.plotConfig,()=>{const I=p.usedColumns.some(f=>S.value.includes(f)&&!C.value.includes(f));l.useReducedPairCalls&&I&&u()}),j(()=>n.timeframe,()=>{g()}),Ge(()=>{c.value=n.plotConfigModal,s.activeBot.selectedPair?s.activeBot.plotPair=s.activeBot.selectedPair:n.availablePairs.length>0&&([s.activeBot.plotPair]=n.availablePairs),p.plotConfigChanged(),g()}),(I,f)=>{const m=Oe,T=an,H=Se,N=mn,E=rn,z=wt,R=un,$=uo,b=ji,W=cn;return v(),_("div",co,[O("div",po,[O("div",fo,[O("div",ho,[O("span",mo,K(a(r))+" | "+K(t.timeframe||""),1),y(m,{modelValue:a(s).activeBot.plotPair,"onUpdate:modelValue":f[0]||(f[0]=Z=>a(s).activeBot.plotPair=Z),class:"md:ms-2",options:t.availablePairs,size:"small",clearable:!1,onInput:u},null,8,["modelValue","options"]),y(H,{title:"Refresh chart",severity:"secondary",disabled:!a(s).activeBot.plotPair||a(P),size:"small",onClick:u},{default:L(()=>[y(T)]),_:1},8,["disabled"]),a(P)?(v(),G(N,{key:0,class:"w-8 h-8","stroke-width":"8",small:"",label:"Spinning"})):A("",!0),O("div",bo,[O("div",go,[a(d)?(v(),_("small",vo,"Long entries: "+K(a(d).enter_long_signals||a(d).buy_signals),1)):A("",!0),a(d)?(v(),_("small",yo,"Long exit: "+K(a(d).exit_long_signals||a(d).sell_signals),1)):A("",!0)]),O("div",xo,[a(d)&&a(d).enter_short_signals?(v(),_("small",Oo,"Short entries: "+K(a(d).enter_short_signals),1)):A("",!0),a(d)&&a(d).exit_short_signals?(v(),_("small",So,"Short exits: "+K(a(d).exit_short_signals),1)):A("",!0)])])]),O("div",Io,[y(E,{modelValue:a(l).useHeikinAshiCandles,"onUpdate:modelValue":f[1]||(f[1]=Z=>a(l).useHeikinAshiCandles=Z)},{default:L(()=>f[3]||(f[3]=[O("span",{class:"text-nowrap"},"Heikin Ashi",-1)])),_:1},8,["modelValue"]),O("div",ko,[y(z)]),O("div",wo,[y(H,{size:"small",title:"Plot configurator",severity:"secondary",onClick:h},{icon:L(()=>[y(R,{width:"12",height:"12"})]),_:1})])])]),O("div",_o,[O("div",Co,[a(B)?(v(),G($,{key:0,dataset:a(d),trades:t.trades,"plot-config":a(p).plotConfig,"heikin-ashi":a(l).useHeikinAshiCandles,"use-u-t-c":a(l).timezone==="UTC",theme:a(l).chartTheme,"slider-position":t.sliderPosition,"color-up":a(i).colorUp,"color-down":a(i).colorDown,"label-side":a(l).chartLabelSide},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position","color-up","color-down","label-side"])):(v(),_("div",$o,[a(P)?(v(),G(N,{key:0,class:"w-5 h-5",label:"Spinning"})):(v(),_("div",Mo,K(a(w)),1)),a(s).activeBot.historyTakesLonger?(v(),_("p",Lo," This is taking longer than expected ... Hold on ... ")):A("",!0)]))]),y(mt,{name:"fade"},{default:L(()=>[t.plotConfigModal?A("",!0):vt((v(),_("div",Po,[y(b,{columns:a(S),"is-visible":a(c)??!1},null,8,["columns","is-visible"])],512)),[[dn,a(c)]])]),_:1})])]),t.plotConfigModal?(v(),G(W,{key:0,id:"plotConfiguratorModal",visible:a(k),"onUpdate:visible":f[2]||(f[2]=Z=>X(k)?k.value=Z:null),header:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:L(()=>[y(b,{"is-visible":a(k),columns:a(S)},null,8,["is-visible","columns"])]),_:1},8,["visible"])):A("",!0)])}}}),Fo=Ze(Vo,[["__scopeId","data-v-14bfb749"]]);export{Fo as _,St as s};
//# sourceMappingURL=CandleChartContainer-LH-dvuhq.js.map
