import{_ as ne,S as Ne,V as Re,t as Ue,H as We,I as je,y as Ke,F as qe,aP as Ge,n as pe,j as he,aT as Xe,q as be,a2 as de,bE as Ye,c_ as J,T as Qe,R as te,c$ as ge,c6 as L,by as Ze,d0 as Je,a5 as et,d1 as ye,a7 as xe,d2 as tt,d3 as at,a4 as nt,aj as rt,aW as it,d4 as ot,d5 as lt}from"./installCanvasRenderer-C6uSIFNs.js";import{ab as st}from"./chartZoom-DtDUebyo.js";import{d as X,aU as ke,a4 as we,u as re,r as V,b8 as ut,l as z,a as y,b1 as ie,h as T,e as k,w as Se,c as C,k as H,f as b,b as x,i as R,s as Ve,b9 as ee,z as I,g as Y,x as U,ba as Te,Z as dt,$ as ct,af as ft,ap as mt,am as vt,bb as pt,bc as ht,N as K,a6 as bt,j as gt,E as yt,H as Q,bd as Ee,B as xt,K as kt,U as wt,aR as St,F as j,m as Vt,D as ce,be as Tt}from"./index-CYaPUaP7.js";import{s as Be}from"./index-DsUEvk8J.js";import{s as Pe}from"./index-DWZtD3mZ.js";import{s as Et,a as Bt}from"./index-CB5XhdwD.js";import{a as Pt,_ as Ct}from"./InfoBox.vue_vue_type_script_setup_true_lang-hyN12RiD.js";import{s as Dt}from"./index-CUHSfWgB.js";var Ce=function(e){ne(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(Ne);Re(Ce,st,!0);var $t=function(e){ne(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,i){var n=a.getData(),o=this.group,l=this._data;this._data||o.removeAll();var f=a.get("layout")==="horizontal"?1:0;n.diff(l).add(function(m){if(n.hasValue(m)){var c=n.getItemLayout(m),s=fe(c,n,m,f,!0);n.setItemGraphicEl(m,s),o.add(s)}}).update(function(m,c){var s=l.getItemGraphicEl(c);if(!n.hasValue(m)){o.remove(s);return}var p=n.getItemLayout(m);s?(Ue(s),De(p,s,n,m)):s=fe(p,n,m,f),o.add(s),n.setItemGraphicEl(m,s)}).remove(function(m){var c=l.getItemGraphicEl(m);c&&o.remove(c)}).execute(),this._data=n},t.prototype.remove=function(a){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(n){n&&r.remove(n)})},t.type="boxplot",t}(We),Lt=function(){function e(){}return e}(),At=function(e){ne(t,e);function t(a){var r=e.call(this,a)||this;return r.type="boxplotBoxPath",r}return t.prototype.getDefaultShape=function(){return new Lt},t.prototype.buildPath=function(a,r){var i=r.points,n=0;for(a.moveTo(i[n][0],i[n][1]),n++;n<4;n++)a.lineTo(i[n][0],i[n][1]);for(a.closePath();n<i.length;n++)a.moveTo(i[n][0],i[n][1]),n++,a.lineTo(i[n][0],i[n][1])},t}(Ge);function fe(e,t,a,r,i){var n=e.ends,o=new At({shape:{points:i?Mt(n,r,e):n}});return De(e,o,t,a,i),o}function De(e,t,a,r,i){var n=a.hostModel,o=je[i?"initProps":"updateProps"];o(t,{shape:{points:e.ends}},n,r),t.useStyle(a.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var l=a.getItemModel(r),f=l.getModel("emphasis");Ke(t,l),qe(t,f.get("focus"),f.get("blurScope"),f.get("disabled"))}function Mt(e,t,a){return pe(e,function(r){return r=r.slice(),r[t]=a.initBaseline,r})}var q=he;function _t(e){var t=It(e);q(t,function(a){var r=a.seriesModels;r.length&&(Ft(a),q(r,function(i,n){Ot(i,a.boxOffsetList[n],a.boxWidthList[n])}))})}function It(e){var t=[],a=[];return e.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),n=Xe(a,i);n<0&&(n=a.length,a[n]=i,t[n]={axis:i,seriesModels:[]}),t[n].seriesModels.push(r)}),t}function Ft(e){var t=e.axis,a=e.seriesModels,r=a.length,i=e.boxWidthList=[],n=e.boxOffsetList=[],o=[],l;if(t.type==="category")l=t.getBandWidth();else{var f=0;q(a,function(h){f=Math.max(f,h.getData().count())});var m=t.getExtent();l=Math.abs(m[1]-m[0])/f}q(a,function(h){var d=h.get("boxWidth");be(d)||(d=[d,d]),o.push([de(d[0],l)||0,de(d[1],l)||0])});var c=l*.8-2,s=c/r*.3,p=(c-s*(r-1))/r,w=p/2-c/2;q(a,function(h,d){n.push(w),w+=s+p,i.push(Math.min(Math.max(p,o[d][0]),o[d][1]))})}function Ot(e,t,a){var r=e.coordinateSystem,i=e.getData(),n=a/2,o=e.get("layout")==="horizontal"?0:1,l=1-o,f=["x","y"],m=i.mapDimension(f[o]),c=i.mapDimensionsAll(f[l]);if(m==null||c.length<5)return;for(var s=0;s<i.count();s++){var p=i.get(m,s),w=u(p,c[2],s),h=u(p,c[0],s),d=u(p,c[1],s),E=u(p,c[3],s),B=u(p,c[4],s),g=[];F(g,d,!1),F(g,E,!0),g.push(h,d,B,E),D(g,h),D(g,B),D(g,w),i.setItemLayout(s,{initBaseline:w[l],ends:g})}function u(_,O,N){var S=i.get(O,N),W=[];W[o]=_,W[l]=S;var v;return isNaN(_)||isNaN(S)?v=[NaN,NaN]:(v=r.dataToPoint(W),v[o]+=t),v}function F(_,O,N){var S=O.slice(),W=O.slice();S[o]+=n,W[o]-=n,N?_.push(S,W):_.push(W,S)}function D(_,O){var N=O.slice(),S=O.slice();N[o]-=n,S[o]+=n,_.push(N,S)}}function zt(e,t){t=t||{};for(var a=[],r=[],i=t.boundIQR,n=i==="none"||i===0,o=0;o<e.length;o++){var l=Ye(e[o].slice()),f=J(l,.25),m=J(l,.5),c=J(l,.75),s=l[0],p=l[l.length-1],w=(i??1.5)*(c-f),h=n?s:Math.max(s,f-w),d=n?p:Math.min(p,c+w),E=t.itemNameFormatter,B=Qe(E)?E({value:o}):te(E)?E.replace("{value}",o+""):o+"";a.push([B,h,f,m,c,d]);for(var g=0;g<l.length;g++){var u=l[g];if(u<h||u>d){var F=[B,u];r.push(F)}}}return{boxData:a,outliers:r}}var Ht={type:"echarts:boxplot",transform:function(t){var a=t.upstream;if(a.sourceFormat!==ge){var r="";L(r)}var i=zt(a.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function ln(e){e.registerSeriesModel(Ce),e.registerChartView($t),e.registerLayout(_t),e.registerTransform(Ht)}var me={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Nt=function(){function e(t){var a=this._condVal=te(t)?new RegExp(t):at(t)?t:null;if(a==null){var r="";L(r)}}return e.prototype.evaluate=function(t){var a=typeof t;return te(a)?this._condVal.test(t):nt(a)?this._condVal.test(t+""):!1},e}(),Rt=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Ut=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(!t[a].evaluate())return!1;return!0},e}(),Wt=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(t[a].evaluate())return!0;return!1},e}(),jt=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Kt=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,a=this.getValue,r=a(this.valueGetterParam),i=t?this.valueParser(r):null,n=0;n<this.subCondList.length;n++)if(!this.subCondList[n].evaluate(t?i:r))return!1;return!0},e}();function oe(e,t){if(e===!0||e===!1){var a=new Rt;return a.value=e,a}var r="";return $e(e)||L(r),e.and?ve("and",e,t):e.or?ve("or",e,t):e.not?qt(e,t):Gt(e,t)}function ve(e,t,a){var r=t[e],i="";be(r)||L(i),r.length||L(i);var n=e==="and"?new Ut:new Wt;return n.children=pe(r,function(o){return oe(o,a)}),n.children.length||L(i),n}function qt(e,t){var a=e.not,r="";$e(a)||L(r);var i=new jt;return i.child=oe(a,t),i.child||L(r),i}function Gt(e,t){for(var a="",r=t.prepareGetValue(e),i=[],n=et(e),o=e.parser,l=o?ye(o):null,f=0;f<n.length;f++){var m=n[f];if(!(m==="parser"||t.valueGetterAttrMap.get(m))){var c=xe(me,m)?me[m]:m,s=e[m],p=l?l(s):s,w=tt(c,p)||c==="reg"&&new Nt(p);w||L(a),i.push(w)}}i.length||L(a);var h=new Kt;return h.valueGetterParam=r,h.valueParser=l,h.getValue=t.getValue,h.subCondList=i,h}function $e(e){return Ze(e)&&!Je(e)}var Xt=function(){function e(t,a){this._cond=oe(t,a)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Yt(e,t){return new Xt(e,t)}var Qt={type:"echarts:filter",transform:function(e){for(var t=e.upstream,a,r=Yt(e.config,{valueGetterAttrMap:rt({dimension:!0}),prepareGetValue:function(l){var f="",m=l.dimension;xe(l,"dimension")||L(f);var c=t.getDimensionInfo(m);return c||L(f),{dimIdx:c.index}},getValue:function(l){return t.retrieveValueFromItem(a,l.dimIdx)}}),i=[],n=0,o=t.count();n<o;n++)a=t.getRawDataItem(n),r.evaluate()&&i.push(a);return{data:i}}},Zt={type:"echarts:sort",transform:function(e){var t=e.upstream,a=e.config,r="",i=it(a);i.length||L(r);var n=[];he(i,function(c){var s=c.dimension,p=c.order,w=c.parser,h=c.incomparable;if(s==null&&L(r),p!=="asc"&&p!=="desc"&&L(r),h&&h!=="min"&&h!=="max"){var d="";L(d)}if(p!=="asc"&&p!=="desc"){var E="";L(E)}var B=t.getDimensionInfo(s);B||L(r);var g=w?ye(w):null;w&&!g&&L(r),n.push({dimIdx:B.index,parser:g,comparator:new ot(p,h)})});var o=t.sourceFormat;o!==ge&&o!==lt&&L(r);for(var l=[],f=0,m=t.count();f<m;f++)l.push(t.getRawDataItem(f));return l.sort(function(c,s){for(var p=0;p<n.length;p++){var w=n[p],h=t.retrieveValueFromItem(c,w.dimIdx),d=t.retrieveValueFromItem(s,w.dimIdx);w.parser&&(h=w.parser(h),d=w.parser(d));var E=w.comparator.evaluate(h,d);if(E!==0)return E}return 0}),{data:l}}};function sn(e){e.registerTransform(Qt),e.registerTransform(Zt)}const Jt={key:0},ea={for:"stake-input",class:"block font-medium mb-1"},ta={key:1},aa={key:2},na={class:"flex justify-end gap-2"},ra=X({__name:"ForceEntryForm",props:ke({pair:{type:String,default:""},positionIncrease:{type:Boolean,default:!1}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=we(e,"modelValue"),r=re(),i=V(),n=V(""),o=V(void 0),l=V(void 0),f=V(void 0),m=V(""),c=V(ut.long),s=V("force_entry"),p=[{value:"market",text:"Market"},{value:"limit",text:"Limit"}],w=[{value:"long",text:"Long"},{value:"short",text:"Short"}],h=()=>{var u;return(u=i.value)==null?void 0:u.checkValidity()},d=async()=>{if(!h())return;const g={pair:n.value};o.value&&(g.price=Number(o.value)),m.value&&(g.ordertype=m.value),l.value&&(g.stakeamount=l.value),r.activeBot.botApiVersion>=2.13&&r.activeBot.shortAllowed&&(g.side=c.value),r.activeBot.botApiVersion>=2.16&&s.value&&(g.entry_tag=s.value),f.value&&(g.leverage=f.value),r.activeBot.forceentry(g),await Te(),a.value=!1},E=()=>{var g,u,F,D,_,O,N,S;console.log("resetForm"),n.value=t.pair,o.value=void 0,l.value=void 0,m.value=((u=(g=r.activeBot.botState)==null?void 0:g.order_types)==null?void 0:u.forcebuy)||((D=(F=r.activeBot.botState)==null?void 0:F.order_types)==null?void 0:D.force_entry)||((O=(_=r.activeBot.botState)==null?void 0:_.order_types)==null?void 0:O.buy)||((S=(N=r.activeBot.botState)==null?void 0:N.order_types)==null?void 0:S.entry)||"limit"},B=()=>{d()};return(g,u)=>{const F=Pe,D=Ve,_=Be,O=Y,N=ie;return y(),z(N,{visible:a.value,"onUpdate:visible":u[9]||(u[9]=S=>a.value=S),header:e.positionIncrease?`Increasing position for ${e.pair}`:"Force entering a trade",modal:"",onShow:E,onHide:E},{footer:T(()=>[k("div",na,[x(O,{severity:"secondary",size:"small",onClick:u[8]||(u[8]=S=>a.value=!1)},{default:T(()=>u[16]||(u[16]=[U(" Cancel ")])),_:1}),x(O,{severity:"primary",size:"small",onClick:B},{default:T(()=>u[17]||(u[17]=[U(" Enter Position ")])),_:1})])]),default:T(()=>[k("form",{ref_key:"form",ref:i,class:"space-y-4 md:min-w-[32rem]",onSubmit:Se(d,["prevent"])},[b(r).activeBot.botApiVersion>=2.13&&b(r).activeBot.shortAllowed?(y(),C("div",Jt,[u[10]||(u[10]=k("label",{class:"block font-medium mb-1"},"Order direction (Long or Short)",-1)),x(F,{modelValue:b(c),"onUpdate:modelValue":u[0]||(u[0]=S=>R(c)?c.value=S:null),options:w,"allow-empty":!1,"option-label":"text","option-value":"value",size:"small",class:"w-full"},null,8,["modelValue"])])):H("",!0),k("div",null,[u[11]||(u[11]=k("label",{for:"pair-input",class:"block font-medium mb-1"},"Pair",-1)),x(D,{id:"pair-input",modelValue:b(n),"onUpdate:modelValue":u[1]||(u[1]=S=>R(n)?n.value=S:null),disabled:e.positionIncrease,required:"",class:"w-full",onKeydown:ee(B,["enter"]),onFocus:u[2]||(u[2]=S=>S.target.select())},null,8,["modelValue","disabled"])]),k("div",null,[u[12]||(u[12]=k("label",{for:"price-input",class:"block font-medium mb-1"},"Price [optional]",-1)),x(_,{id:"price-input",modelValue:b(o),"onUpdate:modelValue":u[3]||(u[3]=S=>R(o)?o.value=S:null),"show-buttons":"",min:0,"max-fraction-digits":8,step:.1,class:"w-full",onKeydown:ee(B,["enter"])},null,8,["modelValue"])]),k("div",null,[k("label",ea,"* Stake-amount in "+I(b(r).activeBot.stakeCurrency)+" [optional]",1),x(_,{id:"stake-input",modelValue:b(l),"onUpdate:modelValue":u[4]||(u[4]=S=>R(l)?l.value=S:null),"show-buttons":"",min:0,step:b(r).activeBot.stakeCurrency==="USDT"?10:1,"max-fraction-digits":5,fluid:""},null,8,["modelValue","step"])]),b(r).activeBot.botApiVersion>2.16&&b(r).activeBot.shortAllowed?(y(),C("div",ta,[u[13]||(u[13]=k("label",{for:"leverage-input",class:"block font-medium mb-1"},"Leverage to apply [optional]",-1)),x(_,{id:"leverage-input",modelValue:b(f),"onUpdate:modelValue":u[5]||(u[5]=S=>R(f)?f.value=S:null),"show-buttons":"",min:0,step:1,"max-fraction-digits":1,class:"w-full",onKeydown:ee(B,["enter"])},null,8,["modelValue"])])):H("",!0),k("div",null,[u[14]||(u[14]=k("label",{class:"block text-sm font-medium mb-1"},"OrderType",-1)),x(F,{modelValue:b(m),"onUpdate:modelValue":u[6]||(u[6]=S=>R(m)?m.value=S:null),options:p,"option-label":"text","option-value":"value",size:"small",class:"w-full"},null,8,["modelValue"])]),b(r).activeBot.botApiVersion>1.16?(y(),C("div",aa,[u[15]||(u[15]=k("label",{for:"enterTag-input",class:"block text-sm font-medium mb-1"},"* Custom entry tag [optional]",-1)),x(D,{id:"enterTag-input",modelValue:b(s),"onUpdate:modelValue":u[7]||(u[7]=S=>R(s)?s.value=S:null),class:"w-full"},null,8,["modelValue"])])):H("",!0)],544)]),_:1},8,["visible","header"])}}});var ia=({dt:e})=>`
.p-slider {
    position: relative;
    background: ${e("slider.track.background")};
    border-radius: ${e("slider.track.border.radius")};
}

.p-slider-handle {
    cursor: grab;
    touch-action: none;
    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
    height: ${e("slider.handle.height")};
    width: ${e("slider.handle.width")};
    background: ${e("slider.handle.background")};
    border-radius: ${e("slider.handle.border.radius")};
    transition: background ${e("slider.transition.duration")}, color ${e("slider.transition.duration")}, border-color ${e("slider.transition.duration")}, box-shadow ${e("slider.transition.duration")}, outline-color ${e("slider.transition.duration")};
    outline-color: transparent;
}

.p-slider-handle::before {
    content: "";
    width: ${e("slider.handle.content.width")};
    height: ${e("slider.handle.content.height")};
    display: block;
    background: ${e("slider.handle.content.background")};
    border-radius: ${e("slider.handle.content.border.radius")};
    box-shadow: ${e("slider.handle.content.shadow")};
    transition: background ${e("slider.transition.duration")};
}

.p-slider:not(.p-disabled) .p-slider-handle:hover {
    background: ${e("slider.handle.hover.background")};
}

.p-slider:not(.p-disabled) .p-slider-handle:hover::before {
    background: ${e("slider.handle.content.hover.background")};
}

.p-slider-handle:focus-visible {
    box-shadow: ${e("slider.handle.focus.ring.shadow")};
    outline: ${e("slider.handle.focus.ring.width")} ${e("slider.handle.focus.ring.style")} ${e("slider.handle.focus.ring.color")};
    outline-offset: ${e("slider.handle.focus.ring.offset")};
}

.p-slider-range {
    display: block;
    background: ${e("slider.range.background")};
    border-radius: ${e("slider.track.border.radius")};
}

.p-slider.p-slider-horizontal {
    height: ${e("slider.track.size")};
}

.p-slider-horizontal .p-slider-range {
    inset-block-start: 0;
    inset-inline-start: 0;
    height: 100%;
}

.p-slider-horizontal .p-slider-handle {
    inset-block-start: 50%;
    margin-block-start: calc(-1 * calc(${e("slider.handle.height")} / 2));
    margin-inline-start: calc(-1 * calc(${e("slider.handle.width")} / 2));
}

.p-slider-vertical {
    min-height: 100px;
    width: ${e("slider.track.size")};
}

.p-slider-vertical .p-slider-handle {
    inset-inline-start: 50%;
    margin-inline-start: calc(-1 * calc(${e("slider.handle.width")} / 2));
    margin-block-end: calc(-1 * calc(${e("slider.handle.height")} / 2));
}

.p-slider-vertical .p-slider-range {
    inset-block-end: 0;
    inset-inline-start: 0;
    width: 100%;
}
`,oa={handle:{position:"absolute"},range:{position:"absolute"}},la={root:function(t){var a=t.instance,r=t.props;return["p-slider p-component",{"p-disabled":r.disabled,"p-invalid":a.$invalid,"p-slider-horizontal":r.orientation==="horizontal","p-slider-vertical":r.orientation==="vertical"}]},range:"p-slider-range",handle:"p-slider-handle"},sa=dt.extend({name:"slider",style:ia,classes:la,inlineStyles:oa}),ua={name:"BaseSlider",extends:ct,props:{min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:sa,provide:function(){return{$pcSlider:this,$parentInstance:this}}};function G(e){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(e)}function da(e,t,a){return(t=ca(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ca(e){var t=fa(e,"string");return G(t)=="symbol"?t:t+""}function fa(e,t){if(G(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(G(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ma(e){return ba(e)||ha(e)||pa(e)||va()}function va(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pa(e,t){if(e){if(typeof e=="string")return ae(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ae(e,t):void 0}}function ha(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ba(e){if(Array.isArray(e))return ae(e)}function ae(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var Le={name:"Slider",extends:ua,inheritAttrs:!1,emits:["change","slideend"],dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeUnmount:function(){this.unbindDragListeners()},methods:{updateDomData:function(){var t=this.$el.getBoundingClientRect();this.initX=t.left+pt(),this.initY=t.top+ht(),this.barWidth=this.$el.offsetWidth,this.barHeight=this.$el.offsetHeight},setValue:function(t){var a,r=t.touches?t.touches[0].pageX:t.pageX,i=t.touches?t.touches[0].pageY:t.pageY;this.orientation==="horizontal"?vt(this.$el)?a=(this.initX+this.barWidth-r)*100/this.barWidth:a=(r-this.initX)*100/this.barWidth:a=(this.initY+this.barHeight-i)*100/this.barHeight;var n=(this.max-this.min)*(a/100)+this.min;if(this.step){var o=this.range?this.value[this.handleIndex]:this.value,l=n-o;l<0?n=o+Math.ceil(n/this.step-o/this.step)*this.step:l>0&&(n=o+Math.floor(n/this.step-o/this.step)*this.step)}else n=Math.floor(n);this.updateModel(t,n)},updateModel:function(t,a){var r=Math.round(a*100)/100,i;this.range?(i=this.value?ma(this.value):[],this.handleIndex==0?(r<this.min?r=this.min:r>=this.max&&(r=this.max),i[0]=r):(r>this.max?r=this.max:r<=this.min&&(r=this.min),i[1]=r)):(r<this.min?r=this.min:r>this.max&&(r=this.max),i=r),this.writeValue(i,t),this.$emit("change",i)},onDragStart:function(t,a){this.disabled||(this.$el.setAttribute("data-p-sliding",!0),this.dragging=!0,this.updateDomData(),this.range&&this.value[0]===this.max?this.handleIndex=0:this.handleIndex=a,t.currentTarget.focus())},onDrag:function(t){this.dragging&&this.setValue(t)},onDragEnd:function(t){this.dragging&&(this.dragging=!1,this.$el.setAttribute("data-p-sliding",!1),this.$emit("slideend",{originalEvent:t,value:this.value}))},onBarClick:function(t){this.disabled||mt(t.target,"data-pc-section")!=="handle"&&(this.updateDomData(),this.setValue(t))},onMouseDown:function(t,a){this.bindDragListeners(),this.onDragStart(t,a)},onKeyDown:function(t,a){switch(this.handleIndex=a,t.code){case"ArrowDown":case"ArrowLeft":this.decrementValue(t,a),t.preventDefault();break;case"ArrowUp":case"ArrowRight":this.incrementValue(t,a),t.preventDefault();break;case"PageDown":this.decrementValue(t,a,!0),t.preventDefault();break;case"PageUp":this.incrementValue(t,a,!0),t.preventDefault();break;case"Home":this.updateModel(t,this.min),t.preventDefault();break;case"End":this.updateModel(t,this.max),t.preventDefault();break}},onBlur:function(t,a){var r,i;(r=(i=this.formField).onBlur)===null||r===void 0||r.call(i,t)},decrementValue:function(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i;this.range?this.step?i=this.value[a]-this.step:i=this.value[a]-1:this.step?i=this.value-this.step:!this.step&&r?i=this.value-10:i=this.value-1,this.updateModel(t,i),t.preventDefault()},incrementValue:function(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i;this.range?this.step?i=this.value[a]+this.step:i=this.value[a]+1:this.step?i=this.value+this.step:!this.step&&r?i=this.value+10:i=this.value+1,this.updateModel(t,i),t.preventDefault()},bindDragListeners:function(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners:function(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)},rangeStyle:function(){if(this.range){var t=this.rangeEndPosition>this.rangeStartPosition?this.rangeEndPosition-this.rangeStartPosition:this.rangeStartPosition-this.rangeEndPosition,a=this.rangeEndPosition>this.rangeStartPosition?this.rangeStartPosition:this.rangeEndPosition;return this.horizontal?{"inset-inline-start":a+"%",width:t+"%"}:{bottom:a+"%",height:t+"%"}}else return this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle:function(){return this.horizontal?{"inset-inline-start":this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},rangeStartHandleStyle:function(){return this.horizontal?{"inset-inline-start":this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle:function(){return this.horizontal?{"inset-inline-start":this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}},computed:{value:function(){var t;if(this.range){var a,r,i,n;return[(a=(r=this.d_value)===null||r===void 0?void 0:r[0])!==null&&a!==void 0?a:this.min,(i=(n=this.d_value)===null||n===void 0?void 0:n[1])!==null&&i!==void 0?i:this.max]}return(t=this.d_value)!==null&&t!==void 0?t:this.min},horizontal:function(){return this.orientation==="horizontal"},vertical:function(){return this.orientation==="vertical"},handlePosition:function(){return this.value<this.min?0:this.value>this.max?100:(this.value-this.min)*100/(this.max-this.min)},rangeStartPosition:function(){return this.value&&this.value[0]!==void 0?this.value[0]<this.min?0:(this.value[0]-this.min)*100/(this.max-this.min):0},rangeEndPosition:function(){return this.value&&this.value.length===2&&this.value[1]!==void 0?this.value[1]>this.max?100:(this.value[1]-this.min)*100/(this.max-this.min):100},dataP:function(){return ft(da({},this.orientation,this.orientation))}}},ga=["data-p"],ya=["data-p"],xa=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation","data-p"],ka=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation","data-p"],wa=["tabindex","aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby","aria-label","aria-orientation","data-p"];function Sa(e,t,a,r,i,n){return y(),C("div",K({class:e.cx("root"),onClick:t[18]||(t[18]=function(){return n.onBarClick&&n.onBarClick.apply(n,arguments)})},e.ptmi("root"),{"data-p-sliding":!1,"data-p":n.dataP}),[k("span",K({class:e.cx("range"),style:[e.sx("range"),n.rangeStyle()]},e.ptm("range"),{"data-p":n.dataP}),null,16,ya),e.range?H("",!0):(y(),C("span",K({key:0,class:e.cx("handle"),style:[e.sx("handle"),n.handleStyle()],onTouchstartPassive:t[0]||(t[0]=function(o){return n.onDragStart(o)}),onTouchmovePassive:t[1]||(t[1]=function(o){return n.onDrag(o)}),onTouchend:t[2]||(t[2]=function(o){return n.onDragEnd(o)}),onMousedown:t[3]||(t[3]=function(o){return n.onMouseDown(o)}),onKeydown:t[4]||(t[4]=function(o){return n.onKeyDown(o)}),onBlur:t[5]||(t[5]=function(o){return n.onBlur(o)}),tabindex:e.tabindex,role:"slider","aria-valuemin":e.min,"aria-valuenow":e.d_value,"aria-valuemax":e.max,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-orientation":e.orientation},e.ptm("handle"),{"data-p":n.dataP}),null,16,xa)),e.range?(y(),C("span",K({key:1,class:e.cx("handle"),style:[e.sx("handle"),n.rangeStartHandleStyle()],onTouchstartPassive:t[6]||(t[6]=function(o){return n.onDragStart(o,0)}),onTouchmovePassive:t[7]||(t[7]=function(o){return n.onDrag(o)}),onTouchend:t[8]||(t[8]=function(o){return n.onDragEnd(o)}),onMousedown:t[9]||(t[9]=function(o){return n.onMouseDown(o,0)}),onKeydown:t[10]||(t[10]=function(o){return n.onKeyDown(o,0)}),onBlur:t[11]||(t[11]=function(o){return n.onBlur(o,0)}),tabindex:e.tabindex,role:"slider","aria-valuemin":e.min,"aria-valuenow":e.d_value?e.d_value[0]:null,"aria-valuemax":e.max,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-orientation":e.orientation},e.ptm("startHandler"),{"data-p":n.dataP}),null,16,ka)):H("",!0),e.range?(y(),C("span",K({key:2,class:e.cx("handle"),style:[e.sx("handle"),n.rangeEndHandleStyle()],onTouchstartPassive:t[12]||(t[12]=function(o){return n.onDragStart(o,1)}),onTouchmovePassive:t[13]||(t[13]=function(o){return n.onDrag(o)}),onTouchend:t[14]||(t[14]=function(o){return n.onDragEnd(o)}),onMousedown:t[15]||(t[15]=function(o){return n.onMouseDown(o,1)}),onKeydown:t[16]||(t[16]=function(o){return n.onKeyDown(o,1)}),onBlur:t[17]||(t[17]=function(o){return n.onBlur(o,1)}),tabindex:e.tabindex,role:"slider","aria-valuemin":e.min,"aria-valuenow":e.d_value?e.d_value[1]:null,"aria-valuemax":e.max,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-orientation":e.orientation},e.ptm("endHandler"),{"data-p":n.dataP}),null,16,wa)):H("",!0)],16,ga)}Le.render=Sa;const Va={class:"mb-4"},Ta={class:"mb-2"},Ea={for:"stake-input",class:"block font-medium mb-1"},Ba={class:"text-sm italic ml-1"},Pa={class:"space-y-2"},Ca={class:"flex justify-end gap-2"},Da=X({__name:"ForceExitForm",props:ke({trade:{type:Object,required:!0},stakeCurrencyDecimals:{type:Number,required:!0}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=we(e,"modelValue"),r=re(),i=V(),n=V(void 0),o=V("limit"),l=()=>{var d;return(d=i.value)==null?void 0:d.checkValidity()};async function f(){if(!l())return;const h={tradeid:String(t.trade.trade_id)};o.value&&(h.ordertype=o.value),n.value&&(h.amount=n.value),await Te(),r.activeBot.forceexit(h),a.value=!1}function m(){var h,d,E,B;n.value=t.trade.amount,o.value=((d=(h=r.activeBot.botState)==null?void 0:h.order_types)==null?void 0:d.force_exit)||((B=(E=r.activeBot.botState)==null?void 0:E.order_types)==null?void 0:B.exit)||"limit"}function c(){f()}const s=bt(n,250,{maxWait:500}),p=gt(()=>s.value&&t.trade.current_rate?`~${yt(s.value*t.trade.current_rate,t.trade.quote_currency||"",t.stakeCurrencyDecimals)} (Estimated value) `:""),w=[{value:"market",text:"Market"},{value:"limit",text:"Limit"}];return(h,d)=>{const E=Be,B=Le,g=Pe,u=Y,F=ie;return y(),z(F,{visible:a.value,"onUpdate:visible":d[4]||(d[4]=D=>a.value=D),header:"Force exiting a trade",modal:"",onShow:m,onHide:m},{footer:T(()=>[k("div",Ca,[x(u,{severity:"secondary",size:"small",onClick:d[3]||(d[3]=D=>a.value=!1)},{default:T(()=>d[7]||(d[7]=[U("Cancel")])),_:1}),x(u,{severity:"primary",size:"small",onClick:c},{default:T(()=>d[8]||(d[8]=[U("Exit Position")])),_:1})])]),default:T(()=>[k("form",{ref_key:"form",ref:i,class:"space-y-4 md:min-w-[32rem]",onSubmit:Se(f,["prevent"])},[k("div",Va,[k("p",Ta,[k("span",null,"Exiting Trade #"+I(e.trade.trade_id)+" "+I(e.trade.pair)+".",1),d[5]||(d[5]=k("br",null,null,-1)),k("span",null,"Currently owning "+I(e.trade.amount)+" "+I(e.trade.base_currency),1)])]),k("div",null,[k("label",Ea,[U(" Amount in "+I(e.trade.base_currency)+" [optional] ",1),k("span",Ba,I(p.value),1)]),k("div",Pa,[x(E,{id:"stake-input",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=D=>n.value=D),min:0,max:e.trade.amount,"use-grouping":!1,step:1e-6,"max-fraction-digits":8,class:"w-full","show-buttons":""},null,8,["modelValue","max"]),x(B,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=D=>n.value=D),min:0,max:e.trade.amount,step:1e-6,class:"w-full"},null,8,["modelValue","max"])])]),k("div",null,[d[6]||(d[6]=k("label",{class:"block font-medium mb-1"},"*OrderType",-1)),x(g,{modelValue:o.value,"onUpdate:modelValue":d[2]||(d[2]=D=>o.value=D),options:w,"allow-empty":!1,"option-label":"text","option-value":"value",size:"small",class:"w-full"},null,8,["modelValue"])])],544)]),_:1},8,["visible"])}}}),$a={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function La(e,t){return y(),C("svg",$a,t[0]||(t[0]=[k("path",{fill:"currentColor",d:"M2 12c0 5 4 9 9 9c2.4 0 4.7-.9 6.4-2.6l-1.5-1.5c-1.3 1.4-3 2.1-4.9 2.1c-6.2 0-9.4-7.5-4.9-11.9S18 5.8 18 12h-3l4 4h.1l3.9-4h-3c0-5-4-9-9-9s-9 4-9 9m8 3h2v2h-2zm0-8h2v6h-2z"},null,-1)]))}const Aa=Q({name:"mdi-reload-alert",render:La}),Ma={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _a(e,t){return y(),C("svg",Ma,t[0]||(t[0]=[k("path",{fill:"currentColor",d:"M18 11h-3v3h-2v-3h-3V9h3V6h2v3h3m2-5v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12a2 2 0 0 0 2 2h12c1.11 0 2-.89 2-2V4a2 2 0 0 0-2-2M4 6H2v14a2 2 0 0 0 2 2h14v-2H4z"},null,-1)]))}const Ia=Q({name:"mdi-plus-box-multiple-outline",render:_a}),Fa={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Oa(e,t){return y(),C("svg",Fa,t[0]||(t[0]=[k("path",{fill:"currentColor",d:"M4 20h14v2H4a2 2 0 0 1-2-2V6h2zM20.22 2H7.78C6.8 2 6 2.8 6 3.78v12.44C6 17.2 6.8 18 7.78 18h12.44c.98 0 1.78-.8 1.78-1.78V3.78C22 2.8 21.2 2 20.22 2M19 13.6L17.6 15L14 11.4L10.4 15L9 13.6l3.6-3.6L9 6.4L10.4 5L14 8.6L17.6 5L19 6.4L15.4 10z"},null,-1)]))}const za=Q({name:"mdi-close-box-multiple",render:Oa}),Ha={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Na(e,t){return y(),C("svg",Ha,t[0]||(t[0]=[k("path",{fill:"currentColor",d:"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m-3.4 14L12 13.4L8.4 17L7 15.6l3.6-3.6L7 8.4L8.4 7l3.6 3.6L15.6 7L17 8.4L13.4 12l3.6 3.6z"},null,-1)]))}const Ra=Q({name:"mdi-close-box",render:Na}),Ua={class:"flex flex-col gap-1"},Wa=X({__name:"TradeActions",props:{botApiVersion:{type:Number,default:1},trade:{type:Object,required:!0},enableForceEntry:{type:Boolean,default:!1}},emits:["forceExit","forceExitPartial","cancelOpenOrder","reloadTrade","deleteTrade","forceEntry"],setup(e){return(t,a)=>{const r=Ra,i=Y,n=za,o=Ee,l=Ia,f=Aa,m=xt;return y(),C("div",Ua,[e.botApiVersion<=1.1?(y(),z(i,{key:0,class:"justify-start!",size:"small",severity:"secondary",title:"Forceexit",label:"Forceexit",onClick:a[0]||(a[0]=c=>t.$emit("forceExit",e.trade))},{icon:T(()=>[x(r)]),_:1})):H("",!0),e.botApiVersion>1.1?(y(),z(i,{key:1,size:"small",class:"justify-start!",severity:"secondary",title:"Forceexit limit",label:"Forceexit limit",onClick:a[1]||(a[1]=c=>t.$emit("forceExit",e.trade,"limit"))},{icon:T(()=>[x(r)]),_:1})):H("",!0),e.botApiVersion>1.1?(y(),z(i,{key:2,class:"justify-start!",size:"small",severity:"secondary",title:"Forceexit market",label:"Forceexit market",onClick:a[2]||(a[2]=c=>t.$emit("forceExit",e.trade,"market"))},{icon:T(()=>[x(r)]),_:1})):H("",!0),e.botApiVersion>2.16?(y(),z(i,{key:3,class:"justify-start!",size:"small",severity:"secondary",title:"Forceexit partial",label:"Forceexit partial",onClick:a[3]||(a[3]=c=>t.$emit("forceExitPartial",e.trade))},{icon:T(()=>[x(n)]),_:1})):H("",!0),e.botApiVersion>=2.24&&(e.trade.open_order_id||e.trade.has_open_orders)?(y(),z(i,{key:4,class:"justify-start!",size:"small",severity:"secondary",title:"Cancel open orders",label:"Cancel open orders",onClick:a[4]||(a[4]=c=>t.$emit("cancelOpenOrder",e.trade))},{icon:T(()=>[x(o)]),_:1})):H("",!0),e.enableForceEntry?(y(),z(i,{key:5,class:"justify-start!",size:"small",severity:"secondary",title:"Increase position",label:"Increase position",onClick:a[5]||(a[5]=c=>t.$emit("forceEntry",e.trade))},{icon:T(()=>[x(l)]),_:1})):H("",!0),e.botApiVersion>=2.28?(y(),z(i,{key:6,class:"justify-start!",size:"small",severity:"secondary",title:"Reload",label:"Reload",onClick:a[6]||(a[6]=c=>t.$emit("reloadTrade",e.trade))},{icon:T(()=>[x(f)]),_:1})):H("",!0),x(i,{class:"justify-start!",size:"small",severity:"secondary",title:"Delete trade",label:"Delete trade",onClick:a[7]||(a[7]=c=>t.$emit("deleteTrade",e.trade))},{icon:T(()=>[x(m)]),_:1})])}}}),ja={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ka(e,t){return y(),C("svg",ja,t[0]||(t[0]=[k("path",{fill:"currentColor",d:"M10 9a1 1 0 0 1 1-1a1 1 0 0 1 1 1v4.47l1.21.13l4.94 2.19c.53.24.85.77.85 1.35v4.36c-.03.82-.68 1.47-1.5 1.5H11c-.38 0-.74-.15-1-.43l-4.9-4.2l.74-.77c.19-.21.46-.32.74-.32h.22L10 19zm1-4a4 4 0 0 1 4 4c0 1.5-.8 2.77-2 3.46v-1.22c.61-.55 1-1.35 1-2.24a3 3 0 0 0-3-3a3 3 0 0 0-3 3c0 .89.39 1.69 1 2.24v1.22C7.8 11.77 7 10.5 7 9a4 4 0 0 1 4-4"},null,-1)]))}const qa=Q({name:"mdi-gesture-tap",render:Ka}),Ga=X({__name:"TradeActionsPopover",props:{trade:{type:Object,required:!0},id:{type:Number,required:!0},botApiVersion:{type:Number,required:!0},enableForceEntry:{type:Boolean,default:!1}},emits:["forceExit","forceExitPartial","cancelOpenOrder","reloadTrade","deleteTrade","forceEntry"],setup(e,{emit:t}){const a=t,r=V(!1);function i(s,p=void 0){r.value=!1,a("forceExit",s,p)}function n(s){r.value=!1,a("forceExitPartial",s)}function o(s){r.value=!1,a("cancelOpenOrder",s)}function l(s){r.value=!1,a("reloadTrade",s)}function f(s){r.value=!1,a("deleteTrade",s)}function m(s){r.value=!1,a("forceEntry",s)}const c=V(null);return(s,p)=>{var B;const w=qa,h=Y,d=Wa,E=Ee;return y(),C("div",null,[x(h,{id:`btn-actions-${e.id}`,class:"btn-xs",size:"small",severity:"secondary",title:"Actions",onClick:(B=b(c))==null?void 0:B.toggle},{default:T(()=>[x(w)]),_:1},8,["id","onClick"]),x(b(Dt),{ref_key:"popover",ref:c,target:`btn-actions-${e.id}`,title:`Actions for ${e.trade.pair}`,triggers:"manual",placement:"left"},{default:T(()=>{var g;return[x(d,{trade:e.trade,"bot-api-version":e.botApiVersion,"enable-force-entry":e.enableForceEntry,onForceExit:i,onForceExitPartial:n,onDeleteTrade:p[0]||(p[0]=u=>f(e.trade)),onCancelOpenOrder:o,onReloadTrade:l,onForceEntry:m},null,8,["trade","bot-api-version","enable-force-entry"]),x(h,{class:"mt-1 w-full text-start",size:"small",severity:"secondary",label:"Close Actions menu",onClick:(g=b(c))==null?void 0:g.hide},{icon:T(()=>[x(E,{class:"me-1"})]),_:1},8,["onClick"])]}),_:1},8,["target","title"])])}}}),Xa={class:"h-full overflow-auto w-full"},Ya={class:"flex justify-end gap-2 p-2"},un=X({__name:"TradeList",props:{trades:{},title:{default:"Trades"},stakeCurrency:{default:""},activeTrades:{type:Boolean,default:!1},showFilter:{type:Boolean,default:!1},multiBotView:{type:Boolean,default:!1},emptyText:{default:"No Trades to show."}},setup(e){const t=e,a=re(),r=Tt(),i=kt(),n=V(1),o=V(),l=V(""),f=V({}),m=t.activeTrades?200:15,c=V(),s=V(!1),p=V(!1),w=V(""),h=V(null),d=V({visible:!1,trade:{}});function E(v){return ce(v,a.activeBot.stakeCurrencyDecimals)}const B=V([{field:"trade_id",header:"ID"},{field:"pair",header:"Pair"},{field:"amount",header:"Amount"},t.activeTrades?{field:"stake_amount",header:"Stake amount"}:{field:"max_stake_amount",header:"Total stake amount"},{field:"open_rate",header:"Open rate"},{field:t.activeTrades?"current_rate":"close_rate",header:t.activeTrades?"Current rate":"Close rate"},{field:"profit",header:t.activeTrades?"Current profit %":"Profit %"},{field:"open_timestamp",header:"Open date"},...t.activeTrades?[{field:"actions",header:""}]:[{field:"close_timestamp",header:"Close date"},{field:"exit_reason",header:"Close Reason"}]]);t.multiBotView&&B.value.unshift({field:"botName",header:"Bot"});const g=V(void 0);function u(v,P=void 0){f.value=v,h.value=1,w.value=`Really exit trade ${v.trade_id} (Pair ${v.pair}) using ${P} Order?`,g.value=P,i.confirmDialog===!0?p.value=!0:F()}function F(){if(h.value===0){const v={tradeid:String(f.value.trade_id),botId:f.value.botId};a.deleteTradeMulti(v).catch(P=>console.log(P.response))}if(h.value===1){const v={tradeid:String(f.value.trade_id),botId:f.value.botId};g.value&&(v.ordertype=g.value),a.forceSellMulti(v).then(P=>console.log(P)).catch(P=>console.log(P.response))}if(h.value===3){const v={tradeid:String(f.value.trade_id),botId:f.value.botId};a.cancelOpenOrderMulti(v)}g.value=void 0,p.value=!1}function D(v){w.value=`Really delete trade ${v.trade_id} (Pair ${v.pair})?`,h.value=0,f.value=v,p.value=!0}function _(v){f.value=v,s.value=!0}function O(v){w.value=`Cancel open order for trade ${v.trade_id} (Pair ${v.pair})?`,f.value=v,h.value=3,p.value=!0}function N(v){a.reloadTradeMulti({tradeid:String(v.trade_id),botId:v.botId})}function S(v){d.value.trade=v,d.value.visible=!0}const W=({data:v,index:P})=>{t.multiBotView&&a.selectedBot!==v.botId&&a.selectBot(v.botId),v&&v.trade_id!==a.activeBot.detailTradeId?(a.activeBot.setDetailTrade(v),o.value=P,t.multiBotView&&r.push({name:"Freqtrade Trading"})):(a.activeBot.setDetailTrade(null),o.value=void 0)};return wt(()=>a.activeBot.detailTradeId,v=>{t.trades.findIndex(Z=>Z.trade_id===v)<0&&(o.value=void 0)}),(v,P)=>{var ue;const Z=Ga,Ae=Pt,le=Ct,Me=Bt,_e=Ve,Ie=Et,Fe=Da,Oe=ra,se=Y,ze=ie;return y(),C("div",Xa,[x(Ie,{ref_key:"tradesTable",ref:c,selection:b(o),"onUpdate:selection":P[1]||(P[1]=A=>R(o)?o.value=A:null),value:v.trades.filter(A=>{var $,M;return A.pair.toLowerCase().includes(b(l).toLowerCase())||(($=A.exit_reason)==null?void 0:$.toLowerCase().includes(b(l).toLowerCase()))||((M=A.enter_tag)==null?void 0:M.toLowerCase().includes(b(l).toLowerCase()))}),rows:b(m),paginator:!v.activeTrades,first:(b(n)-1)*b(m),"selection-mode":"single","data-key":"botTradeId",class:"text-center",size:"small",scrollable:!0,"scroll-height":"flex",onRowClick:W},St({empty:T(()=>[U(I(v.emptyText),1)]),default:T(()=>[(y(!0),C(j,null,Vt(b(B),A=>(y(),z(Me,{key:A.field,field:A.field,header:A.header},{body:T(({data:$,field:M,index:He})=>[M==="trade_id"?(y(),C(j,{key:0},[U(I($.trade_id)+" "+I(b(a).activeBot.botApiVersion>2&&$.trading_mode!=="spot"?($.trade_id?"| ":"")+($.is_short?"Short":"Long"):""),1)],64)):M==="pair"?(y(),C(j,{key:1},[U(I(`${$.pair}${$.open_order_id||$.has_open_orders?"*":""}`),1)],64)):M==="actions"?(y(),z(Z,{key:2,id:He,"enable-force-entry":b(a).activeBot.botState.force_entry_enable,trade:$,"bot-api-version":b(a).activeBot.botApiVersion,onDeleteTrade:Qa=>D($),onForceExit:u,onForceExitPartial:_,onCancelOpenOrder:O,onReloadTrade:N,onForceEntry:S},null,8,["id","enable-force-entry","trade","bot-api-version","onDeleteTrade"])):M==="stake_amount"||M==="max_stake_amount"?(y(),C(j,{key:3},[U(I(E($[M]))+" "+I($.trading_mode!=="spot"?`(${$.leverage}x)`:""),1)],64)):M==="open_rate"||M==="current_rate"||M==="close_rate"?(y(),C(j,{key:4},[U(I(("formatPrice"in v?v.formatPrice:b(ce))($[M])),1)],64)):M==="profit"?(y(),z(Ae,{key:5,trade:$},null,8,["trade"])):M==="open_timestamp"?(y(),z(le,{key:6,date:$.open_timestamp},null,8,["date"])):M==="close_timestamp"?(y(),z(le,{key:7,date:$.close_timestamp??0},null,8,["date"])):(y(),C(j,{key:8},[U(I($[M]),1)],64))]),_:2},1032,["field","header"]))),128))]),_:2},[v.showFilter?{name:"header",fn:T(()=>[k("div",Ya,[x(_e,{modelValue:b(l),"onUpdate:modelValue":P[0]||(P[0]=A=>R(l)?l.value=A:null),placeholder:"Filter",class:"w-64",size:"small"},null,8,["modelValue"])])]),key:"0"}:void 0]),1032,["selection","value","rows","paginator","first"]),v.activeTrades?(y(),z(Fe,{key:0,modelValue:b(s),"onUpdate:modelValue":P[2]||(P[2]=A=>R(s)?s.value=A:null),trade:b(f),"stake-currency-decimals":b(a).activeBot.botState.stake_currency_decimals??3},null,8,["modelValue","trade","stake-currency-decimals"])):H("",!0),x(Oe,{modelValue:b(d).visible,"onUpdate:modelValue":P[3]||(P[3]=A=>b(d).visible=A),pair:(ue=b(d).trade)==null?void 0:ue.pair,"position-increase":""},null,8,["modelValue","pair"]),x(ze,{visible:b(p),"onUpdate:visible":P[5]||(P[5]=A=>R(p)?p.value=A:null),modal:!0,header:"Exit trade"},{footer:T(()=>[x(se,{label:"Cancel",onClick:P[4]||(P[4]=A=>p.value=!1)}),x(se,{label:"Confirm",severity:"danger",onClick:F})]),default:T(()=>[k("p",null,I(b(w)),1)]),_:1},8,["visible"])])}}});export{za as _,Ia as a,ra as b,un as c,ln as d,sn as i};
//# sourceMappingURL=TradeList.vue_vue_type_script_setup_true_lang-B5Oz46pw.js.map
