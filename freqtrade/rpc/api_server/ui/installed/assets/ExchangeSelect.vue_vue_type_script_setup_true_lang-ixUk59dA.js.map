{"version":3,"file":"ExchangeSelect.vue_vue_type_script_setup_true_lang-ixUk59dA.js","sources":["../../src/components/ftbot/ExchangeSelect.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { ExchangeSelection } from '@/types';\n\nconst exchangeModel = defineModel<ExchangeSelection>({ required: true });\n\nconst botStore = useBotStore();\n\nconst exchangeList = computed(() => {\n  const supported = botStore.activeBot.exchangeList\n    .filter((ex) => ex.valid && ex.supported)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  const unsupported = botStore.activeBot.exchangeList\n    .filter((ex) => ex.valid && !ex.supported)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  return [\n    {\n      label: 'Supported',\n      options: supported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\n    },\n    {\n      label: 'Unsupported',\n      options: unsupported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\n    },\n  ];\n});\n\nconst tradeModesTyped = computed(() => {\n  const val = botStore.activeBot.exchangeList.find(\n    (ex) =>\n      ex.name === exchangeModel.value.exchange || ex.classname === exchangeModel.value.exchange,\n  )?.trade_modes;\n  return val ?? [];\n});\n\nconst tradeModes = computed(() => {\n  return tradeModesTyped.value.map((tm) => {\n    return {\n      text: `${tm.margin_mode} ${tm.trading_mode}`,\n      value: tm,\n    };\n  });\n});\n\nwatch(\n  () => exchangeModel.value.exchange,\n  () => {\n    if (tradeModesTyped.value.length < 2) {\n      exchangeModel.value.trade_mode = tradeModesTyped.value[0];\n    }\n  },\n);\n\nonMounted(() => {\n  if (botStore.activeBot.exchangeList.length === 0) {\n    botStore.activeBot.getExchangeList();\n  }\n});\n</script>\n\n<template>\n  <div class=\"w-full flex\">\n    <Select\n      id=\"exchange-select\"\n      v-model=\"exchangeModel.exchange\"\n      size=\"small\"\n      class=\"min-w-52\"\n      filter\n      option-group-label=\"label\"\n      option-group-children=\"options\"\n      option-label=\"text\"\n      option-value=\"value\"\n      :options=\"exchangeList\"\n    >\n    </Select>\n    <Select\n      id=\"tradeMode-select\"\n      v-model=\"exchangeModel.trade_mode\"\n      size=\"small\"\n      class=\"min-w-44\"\n      :options=\"tradeModes\"\n      option-label=\"text\"\n      option-value=\"value\"\n      :disabled=\"tradeModes.length < 2\"\n    >\n    </Select>\n    <Button\n      severity=\"secondary\"\n      variant=\"outlined\"\n      class=\"ms-2 no-min-w\"\n      size=\"small\"\n      @click=\"botStore.activeBot.getExchangeList\"\n    >\n      <template #icon>\n        <i-mdi-refresh />\n      </template>\n    </Button>\n  </div>\n</template>\n"],"names":["exchangeModel","_useModel","botStore","useBotStore","exchangeList","computed","supported","ex","a","b","unsupported","tradeModesTyped","_a","tradeModes","tm","watch","onMounted"],"mappings":"wRAGM,MAAAA,EAAgBC,gBAAiD,EAEjEC,EAAWC,EAAY,EAEvBC,EAAeC,EAAS,IAAM,CAC5B,MAAAC,EAAYJ,EAAS,UAAU,aAClC,OAAQK,GAAOA,EAAG,OAASA,EAAG,SAAS,EACvC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAExCC,EAAcR,EAAS,UAAU,aACpC,OAAQK,GAAOA,EAAG,OAAS,CAACA,EAAG,SAAS,EACxC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAEvC,MAAA,CACL,CACE,MAAO,YACP,QAASH,EAAU,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAChF,EACA,CACE,MAAO,cACP,QAASI,EAAY,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAAA,CAEpF,CAAA,CACD,EAEKC,EAAkBN,EAAS,IAAM,OAKrC,QAJYO,EAAAV,EAAS,UAAU,aAAa,KACzCK,GACCA,EAAG,OAASP,EAAc,MAAM,UAAYO,EAAG,YAAcP,EAAc,MAAM,QAAA,IAFzE,YAAAY,EAGT,cACW,CAAC,CAAA,CAChB,EAEKC,EAAaR,EAAS,IACnBM,EAAgB,MAAM,IAAKG,IACzB,CACL,KAAM,GAAGA,EAAG,WAAW,IAAIA,EAAG,YAAY,GAC1C,MAAOA,CACT,EACD,CACF,EAED,OAAAC,EACE,IAAMf,EAAc,MAAM,SAC1B,IAAM,CACAW,EAAgB,MAAM,OAAS,IACjCX,EAAc,MAAM,WAAaW,EAAgB,MAAM,CAAC,EAC1D,CAEJ,EAEAK,EAAU,IAAM,CACVd,EAAS,UAAU,aAAa,SAAW,GAC7CA,EAAS,UAAU,gBAAgB,CACrC,CACD"}