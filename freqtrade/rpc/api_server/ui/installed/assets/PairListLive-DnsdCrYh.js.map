{"version":3,"file":"PairListLive-DnsdCrYh.js","sources":["../../src/components/ftbot/PairListLive.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useBotStore } from '@/stores/ftbotwrapper';\nimport type Popover from 'primevue/popover';\n\nconst newblacklistpair = ref('');\nconst blackListShow = ref(false);\nconst blacklistAddPopover = ref<InstanceType<typeof Popover>>();\nconst blacklistSelect = ref<number[]>([]);\nconst botStore = useBotStore();\n\nfunction initBlacklist() {\n  if (botStore.activeBot.whitelist.length === 0) {\n    botStore.activeBot.getWhitelist();\n  }\n  if (botStore.activeBot.blacklist.length === 0) {\n    botStore.activeBot.getBlacklist();\n  }\n}\n\nfunction addBlacklistPair() {\n  if (newblacklistpair.value) {\n    blackListShow.value = false;\n    blacklistAddPopover.value?.hide();\n\n    botStore.activeBot.addBlacklist({ blacklist: [newblacklistpair.value] });\n    newblacklistpair.value = '';\n  }\n}\n\nfunction showPopover(event: MouseEvent) {\n  blacklistAddPopover.value?.show(event);\n}\n\nfunction blacklistSelectClick(key: number) {\n  const index = blacklistSelect.value.indexOf(key);\n  if (index > -1) {\n    blacklistSelect.value.splice(index, 1);\n  } else {\n    blacklistSelect.value.push(key);\n  }\n}\n\nfunction deletePairs() {\n  if (blacklistSelect.value.length === 0) {\n    console.log('nothing to delete');\n    return;\n  }\n  // const pairlist = blacklistSelect.value;\n  const pairlist = botStore.activeBot.blacklist.filter(\n    (value, index) => blacklistSelect.value.indexOf(index) > -1,\n  );\n  console.log('Deleting pairs: ', pairlist);\n  botStore.activeBot.deleteBlacklist(pairlist);\n  blacklistSelect.value = [];\n}\nonMounted(() => {\n  initBlacklist();\n});\n</script>\n\n<template>\n  <div>\n    <div>\n      <h3 class=\"text-xl\">Whitelist Methods</h3>\n\n      <ul v-if=\"botStore.activeBot.pairlistMethods.length\" class=\"list wide\">\n        <li\n          v-for=\"(method, key) in botStore.activeBot.pairlistMethods\"\n          :key=\"key\"\n          class=\"pair bg-white text-black align-middle border border-secondary\"\n        >\n          {{ method }}\n        </li>\n      </ul>\n    </div>\n    <!-- Show Whitelist -->\n    <h3 class=\"text-lg font-bold\" :title=\"`${botStore.activeBot.whitelist.length} pairs`\">\n      Whitelist\n    </h3>\n    <ul v-if=\"botStore.activeBot.whitelist.length\" class=\"list\">\n      <li\n        v-for=\"(pair, key) in botStore.activeBot.whitelist\"\n        :key=\"key\"\n        class=\"pair bg-white text-black align-middle border border-secondary\"\n      >\n        {{ pair }}\n      </li>\n    </ul>\n    <p v-else>List Unavailable. Please Login and make sure server is running.</p>\n    <Divider />\n\n    <!-- Blacklsit -->\n    <div>\n      <div class=\"flex flex-row justify-center mb-1\">\n        <label\n          class=\"text-lg font-bold mb-2 w-full\"\n          title=\"Blacklist - Select (followed by a click on '-') to remove pairs\"\n        >\n          Blacklist\n        </label>\n        <div class=\"flex flex-cols items-center gap-1 pe-1\">\n          <Button\n            ref=\"blacklist-add-btn\"\n            severity=\"secondary\"\n            :class=\"botStore.activeBot.botApiVersion >= 1.12 ? 'col-6' : ''\"\n            size=\"small\"\n            @click=\"showPopover\"\n          >\n            <template #icon>\n              <i-mdi-plus-box-outline />\n            </template>\n          </Button>\n          <Button\n            v-if=\"botStore.activeBot.botApiVersion >= 1.12\"\n            size=\"small\"\n            severity=\"secondary\"\n            title=\"Select pairs to delete pairs from your blacklist.\"\n            :disabled=\"blacklistSelect.length === 0\"\n            @click=\"deletePairs\"\n          >\n            <template #icon>\n              <i-mdi-delete />\n            </template>\n          </Button>\n        </div>\n      </div>\n      <Popover ref=\"blacklistAddPopover\" class=\"p-1\">\n        <form ref=\"form\" @submit.prevent=\"addBlacklistPair\">\n          <div class=\"space-y-1\">\n            <h4 class=\"font-bold mb-2\">Add Pair to Blacklist</h4>\n            <div class=\"space-x-2\">\n              <label for=\"pair-input\">Pair</label>\n              <InputText id=\"pair-input\" v-model=\"newblacklistpair\" required autofocus></InputText>\n            </div>\n            <Button\n              id=\"blacklist-submit\"\n              class=\"float-end mb-2\"\n              size=\"small\"\n              severity=\"primary\"\n              type=\"submit\"\n            >\n              Add\n            </Button>\n          </div>\n        </form>\n      </Popover>\n    </div>\n    <ul v-if=\"botStore.activeBot.blacklist.length\" class=\"list\">\n      <li\n        v-for=\"(pair, key) in botStore.activeBot.blacklist\"\n        :key=\"key\"\n        class=\"pair bg-black text-white text-ellipsis overflow-hidden\"\n        :title=\"pair\"\n        :class=\"blacklistSelect.indexOf(key) > -1 ? 'active' : ''\"\n        @click=\"blacklistSelectClick(key)\"\n      >\n        <span class=\"check\"><i-mdi-check-circle /></span>{{ pair }}\n      </li>\n    </ul>\n    <p v-else>BlackList Unavailable. Please Login and make sure server is running.</p>\n  </div>\n</template>\n\n<style scoped>\n@reference '../../styles/tailwind.css';\n\n.check {\n  /* Hidden checkbox on blacklist selection */\n  color: #41b883;\n  opacity: 0;\n  /* border-radius: 50%; */\n  z-index: 5;\n  width: 1.3em;\n  height: 1.3em;\n  top: -0.3em;\n  left: -0.3em;\n  position: absolute;\n  transition: opacity 0.2s;\n}\n\n.pair.active .check {\n  opacity: 1;\n}\n\n.list {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));\n  grid-gap: 0.5rem;\n  padding-bottom: 1rem;\n}\n.wide {\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n}\n\n.pair {\n  @apply p-2 border rounded cursor-pointer relative border-surface-500;\n}\n</style>\n"],"names":["newblacklistpair","ref","blackListShow","blacklistAddPopover","blacklistSelect","botStore","useBotStore","initBlacklist","addBlacklistPair","_a","showPopover","event","blacklistSelectClick","key","index","deletePairs","pairlist","value","onMounted"],"mappings":"+pBAIM,MAAAA,EAAmBC,EAAI,EAAE,EACzBC,EAAgBD,EAAI,EAAK,EACzBE,EAAsBF,EAAkC,EACxDG,EAAkBH,EAAc,EAAE,EAClCI,EAAWC,EAAY,EAE7B,SAASC,GAAgB,CACnBF,EAAS,UAAU,UAAU,SAAW,GAC1CA,EAAS,UAAU,aAAa,EAE9BA,EAAS,UAAU,UAAU,SAAW,GAC1CA,EAAS,UAAU,aAAa,CAClC,CAGF,SAASG,GAAmB,OACtBR,EAAiB,QACnBE,EAAc,MAAQ,IACtBO,EAAAN,EAAoB,QAApB,MAAAM,EAA2B,OAElBJ,EAAA,UAAU,aAAa,CAAE,UAAW,CAACL,EAAiB,KAAK,EAAG,EACvEA,EAAiB,MAAQ,GAC3B,CAGF,SAASU,EAAYC,EAAmB,QAClBF,EAAAN,EAAA,QAAA,MAAAM,EAAO,KAAKE,EAAK,CAGvC,SAASC,EAAqBC,EAAa,CACzC,MAAMC,EAAQV,EAAgB,MAAM,QAAQS,CAAG,EAC3CC,EAAQ,GACMV,EAAA,MAAM,OAAOU,EAAO,CAAC,EAErBV,EAAA,MAAM,KAAKS,CAAG,CAChC,CAGF,SAASE,GAAc,CACjB,GAAAX,EAAgB,MAAM,SAAW,EAAG,CACtC,QAAQ,IAAI,mBAAmB,EAC/B,MAAA,CAGI,MAAAY,EAAWX,EAAS,UAAU,UAAU,OAC5C,CAACY,EAAOH,IAAUV,EAAgB,MAAM,QAAQU,CAAK,EAAI,EAC3D,EACQ,QAAA,IAAI,mBAAoBE,CAAQ,EAC/BX,EAAA,UAAU,gBAAgBW,CAAQ,EAC3CZ,EAAgB,MAAQ,CAAC,CAAA,CAE3B,OAAAc,EAAU,IAAM,CACAX,EAAA,CAAA,CACf"}